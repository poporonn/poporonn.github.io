<!DOCTYPE html>
<!--
  ╔══════════════════════════════════════════════════════════════════╗
  ║  TOOL GAËL — Simple outil de calcul pour la Médecine Nucléaire        ║
  ║                                                                 ║
  ║  Copyright © Swiss Nuclear Doctors — Tous droits réservés       ║
  ║  Développé par Gaël Amzalag                                     ║
  ║                                                                 ║
  ║  Ce logiciel est protégé par le droit d'auteur. Toute           ║
  ║  reproduction, distribution, modification ou utilisation         ║
  ║  non autorisée de tout ou partie de ce code est strictement     ║
  ║  interdite sans l'accord écrit préalable de l'auteur.           ║
  ║                                                                 ║
  ║  This software is protected by copyright law. Any unauthorized  ║
  ║  reproduction, distribution, modification or use of all or      ║
  ║  part of this code is strictly prohibited without prior         ║
  ║  written consent of the author.                                 ║
  ╚══════════════════════════════════════════════════════════════════╝
-->
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#1a5276">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon-180.png">
<title>TOOL GAËL - Médecine Nucléaire</title>
<style>
:root {
  --primary: #1a5276;
  --primary-light: #2980b9;
  --accent: #e74c3c;
  --bg: #f4f6f9;
  --card: #ffffff;
  --text: #2c3e50;
  --text-light: #7f8c8d;
  --border: #dce1e8;
  --input-bg: #fff8f0;
  --result-bg: #eaf7ea;
  --normal: #27ae60;
  --warning: #e67e22;
  --danger: #e74c3c;
  --auto-bg: #e8f0fe;
  --auto-border: #4a90d9;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
input, select, button { max-width: 100%; box-sizing: border-box; }
.form-group { overflow: hidden; }

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
}

header {
  background: linear-gradient(135deg, var(--primary), var(--primary-light));
  color: white;
  padding: 1.2rem 2rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

header h1 { font-size: 1.5rem; font-weight: 600; }
header .subtitle { font-size: 0.85rem; opacity: 0.85; }
header .version { font-size: 0.75rem; opacity: 0.6; }

nav {
  background: white;
  border-bottom: 1px solid var(--border);
  padding: 0 1rem;
  display: flex;
  gap: 0;
  overflow-x: auto;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

nav button {
  padding: 0.8rem 1.2rem;
  border: none;
  background: none;
  cursor: pointer;
  font-size: 0.9rem;
  color: var(--text-light);
  border-bottom: 3px solid transparent;
  transition: all 0.2s;
  white-space: nowrap;
  font-weight: 500;
}

nav button:hover { color: var(--primary); background: #f0f4f8; }
nav button.active {
  color: var(--primary);
  border-bottom-color: var(--primary);
  font-weight: 600;
}

.module { display: none; padding: 1.5rem 2rem; max-width: 1024px; margin: 0 auto; }
.module.active { display: block; }

.module h2 {
  font-size: 1.3rem;
  color: var(--primary);
  margin-bottom: 0.3rem;
}

.module .description {
  color: var(--text-light);
  font-size: 0.9rem;
  margin-bottom: 1.5rem;
}

.card {
  background: var(--card);
  border-radius: 8px;
  padding: 1.2rem 1.5rem;
  margin-bottom: 1rem;
  box-shadow: 0 1px 4px rgba(0,0,0,0.06);
  border: 1px solid var(--border);
  position: relative;
  overflow: hidden;
  max-width: 100%;
}

.card h3 {
  font-size: 1rem;
  color: var(--primary);
  margin-bottom: 0.8rem;
  padding-bottom: 0.4rem;
  border-bottom: 1px solid var(--border);
}

.form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.8rem 1.5rem;
}

.form-group { display: flex; flex-direction: column; gap: 0.3rem; }
.form-group.full { grid-column: 1 / -1; }

.form-group label {
  font-size: 0.82rem;
  font-weight: 600;
  color: var(--text);
}

.form-group label .unit {
  font-weight: 400;
  color: var(--text-light);
}

.form-group input, .form-group select {
  width: 100%;
  min-width: 0;
  padding: 0.5rem 0.7rem;
  border: 1.5px solid var(--border);
  border-radius: 5px;
  font-size: 0.95rem;
  background: var(--input-bg);
  transition: border-color 0.2s;
}

.form-group input:focus, .form-group select:focus {
  outline: none;
  border-color: var(--primary-light);
  box-shadow: 0 0 0 3px rgba(41,128,185,0.1);
}

.form-group input[readonly] {
  background: #f0f0f0;
  color: var(--text-light);
}

/* Auto-populated field style */
.form-group input.auto-filled {
  background: var(--auto-bg);
  border-color: var(--auto-border);
  font-weight: 600;
}

.auto-tag {
  font-size: 0.65rem;
  color: var(--auto-border);
  font-weight: 400;
  font-style: italic;
}

.results-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.8rem 1.5rem;
}

.result-item {
  background: var(--result-bg);
  padding: 0.8rem 1rem;
  border-radius: 6px;
  border-left: 4px solid var(--normal);
}

.result-item.full { grid-column: 1 / -1; }

.result-item .label {
  font-size: 0.78rem;
  color: var(--text-light);
  margin-bottom: 0.2rem;
}

.result-item .value {
  font-size: 1.3rem;
  font-weight: 700;
  color: var(--primary);
}

.result-item .norm {
  font-size: 0.75rem;
  color: var(--text-light);
  margin-top: 0.2rem;
}

.result-item.warning { border-left-color: var(--warning); }
.result-item.warning .value { color: var(--warning); }
.result-item.danger { border-left-color: var(--danger); }
.result-item.danger .value { color: var(--danger); }

.btn {
  padding: 0.6rem 1.5rem;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 600;
  transition: all 0.2s;
}

.btn-primary {
  background: var(--primary);
  color: white;
}
.btn-primary:hover { background: var(--primary-light); }

.btn-secondary {
  background: #ecf0f1;
  color: var(--text);
}
.btn-secondary:hover { background: #dce1e8; }

.btn-row {
  display: flex;
  gap: 0.8rem;
  margin-top: 1rem;
}

.patient-info {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.8rem;
}

.patient-info-3 {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 0.8rem;
}

.norms-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.85rem;
  margin-top: 0.5rem;
}

.norms-table th, .norms-table td {
  padding: 0.4rem 0.7rem;
  border: 1px solid var(--border);
  text-align: left;
}

.norms-table th {
  background: #f0f4f8;
  font-weight: 600;
  color: var(--primary);
}

.norms-table td:last-child { text-align: center; }

.three-col { grid-template-columns: 1fr 1fr 1fr; }

.separator {
  border: none;
  border-top: 1px solid var(--border);
  margin: 1rem 0;
}

/* Grossesse contra-indication overlay */
.thy-disabled {
  opacity: 0.35;
  pointer-events: none;
  position: relative;
}

.thy-disabled::after {
  content: "CONTRE-INDICATION — GROSSESSE";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--danger);
  background: rgba(255,255,255,0.85);
  padding: 0.5rem 1.5rem;
  border: 2px solid var(--danger);
  border-radius: 6px;
  white-space: nowrap;
  z-index: 10;
}

/* OFSP status colors */
.ofsp-ambulatoire { border-left-color: var(--normal); color: var(--normal); }
.ofsp-derogation { border-left-color: var(--warning); color: var(--warning); }
.ofsp-hospitalisation { border-left-color: var(--danger); color: var(--danger); }

/* Marinelli formula box */
.formula-box {
  background: #f8f9fb;
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 0.8rem 1rem;
  font-size: 0.82rem;
  line-height: 1.6;
}

.formula-box .formula-title {
  font-weight: 700;
  color: var(--primary);
  margin-bottom: 0.4rem;
  font-size: 0.88rem;
}

.formula-box .formula-main {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text);
  text-align: center;
  margin: 0.5rem 0;
  padding: 0.4rem;
  background: white;
  border-radius: 4px;
}

.formula-box .formula-legend {
  color: var(--text-light);
  font-size: 0.78rem;
}

.formula-box .formula-legend span {
  color: var(--text);
  font-weight: 600;
}

/* No-print utility */
.no-print { }

/* Print styles - compact 1 page */
@media print {
  @page { margin: 8mm; size: A4; }
  body { font-size: 9pt; background: white; }
  nav { display: none !important; }
  .no-print { display: none !important; }
  header { padding: 0.3rem 0.8rem; }
  header h1 { font-size: 1.1rem; }
  .module { display: none !important; padding: 0.5rem 0.8rem; }
  .module.active { display: block !important; }
  .btn-row { display: none !important; }
  .card { padding: 0.5rem 0.7rem; margin-bottom: 0.4rem; box-shadow: none; border: 1px solid #ccc; }
  .card h3 { font-size: 0.85rem; margin-bottom: 0.3rem; padding-bottom: 0.2rem; }
  .form-grid, .results-grid { gap: 0.3rem 0.8rem; }
  .form-group label { font-size: 0.72rem; }
  .form-group input, .form-group select { font-size: 0.8rem; padding: 0.2rem 0.4rem; border: 1px solid #999; }
  .result-item { padding: 0.3rem 0.5rem; }
  .result-item .value { font-size: 1rem; }
  .result-item .label { font-size: 0.7rem; }
  .result-item .norm { font-size: 0.65rem; }
  .norms-table { font-size: 0.72rem; }
  .norms-table th, .norms-table td { padding: 0.15rem 0.4rem; }
  .separator { margin: 0.4rem 0; }
  .formula-box { padding: 0.4rem 0.6rem; font-size: 0.72rem; }
  .formula-box .formula-main { font-size: 0.88rem; margin: 0.2rem 0; padding: 0.2rem; }
  .formula-box .formula-legend { font-size: 0.68rem; }
  .patient-info, .patient-info-3 { gap: 0.3rem; }
  .module h2 { font-size: 1rem; margin-bottom: 0.1rem; }
  .module .description { font-size: 0.75rem; margin-bottom: 0.5rem; }
  .three-col { grid-template-columns: 1fr 1fr 1fr; }
}

@media (max-width: 700px) {
  header { flex-direction: column; gap: 0.5rem; padding: 0.8rem 1rem; text-align: center; }
  header > div[style*="text-align:right"] { text-align: center; }
  header h1 { font-size: 1.2rem; }
  body { overflow-x: hidden; }
  .module { padding: 0.3rem; max-width: 100%; overflow-x: hidden; }
  .card { padding: 0.5rem; margin-bottom: 0.5rem; margin-left: 0; margin-right: 0; border-radius: 6px; }
  .form-grid, .results-grid, .patient-info, .patient-info-3 { grid-template-columns: 1fr; gap: 0.4rem; max-width: 100%; }
  .form-grid.three-col { grid-template-columns: auto 1fr 1fr !important; gap: 0.3rem 0.4rem; }
  .form-grid.three-col .form-group label { white-space: nowrap; font-size: 0.68rem; }
  .results-grid.three-col { grid-template-columns: 1fr !important; }
  .form-group.full, .result-item.full { grid-column: 1; }
  .form-group { max-width: 100%; }
  .form-group label { font-size: 0.72rem; }
  .form-group input, .form-group select { font-size: 0.8rem; padding: 0.3rem 0.4rem; width: 100%; max-width: 100%; }
  input[type="date"] { -webkit-appearance: none; appearance: none; }
  nav { padding: 0 0.3rem; }
  nav button { padding: 0.5rem 0.6rem; font-size: 0.72rem; }
  .btn-row { flex-wrap: wrap; }
  .btn { padding: 0.5rem 1rem; font-size: 0.82rem; }
  .norms-table { font-size: 0.75rem; }
  .formula-box { padding: 0.3rem 0.5rem !important; }
  .formula-main { font-size: 0.8rem !important; }
  .formula-legend { font-size: 0.62rem !important; }
  h2 { font-size: 1rem; }
  h3 { font-size: 0.9rem; }
  .description { font-size: 0.78rem; }
  /* Stack the 2-column thyroid layout on small screens */
  #mod-thyroide > div[style*="display:flex"] { flex-direction: column !important; }
  #mod-thyroide > div[style*="display:flex"] > .card { flex: 1 1 auto !important; }
}
</style>
</head>
<body>

<header>
  <div style="display:flex; align-items:center; gap:0.8rem;">
    <svg width="36" height="36" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg" style="border-radius:4px; flex-shrink:0;">
      <rect width="600" height="600" fill="#E60000"/>
      <g transform="translate(300 300)">
        <g stroke="white" stroke-width="12" fill="none">
          <ellipse rx="282" ry="150"/>
          <ellipse rx="282" ry="150" transform="rotate(60)"/>
          <ellipse rx="282" ry="150" transform="rotate(120)"/>
        </g>
        <g>
          <rect x="-45" y="-125" width="90" height="250" fill="white"/>
          <rect x="-125" y="-45" width="250" height="90" fill="white"/>
          <animateTransform attributeName="transform" type="scale" values="1;1.08;1" dur="1.0s" repeatCount="indefinite"/>
        </g>
        <defs><circle id="e" r="12" fill="white"/></defs>
        <g>
          <use href="#e"><animateMotion dur="1.5s" begin="0s" repeatCount="indefinite" path="M282 0 A282 150 0 1 1 -282 0 A282 150 0 1 1 282 0"/></use>
          <use href="#e"><animateMotion dur="1.9s" begin="0.5s" repeatCount="indefinite" path="M282 0 A282 150 0 1 0 -282 0 A282 150 0 1 0 282 0"/></use>
          <use href="#e"><animateMotion dur="1.7s" begin="0.8s" repeatCount="indefinite" path="M282 0 A282 150 0 1 1 -282 0 A282 150 0 1 1 282 0"/></use>
        </g>
        <g transform="rotate(60)">
          <use href="#e"><animateMotion dur="1.6s" begin="0.3s" repeatCount="indefinite" path="M282 0 A282 150 0 1 0 -282 0 A282 150 0 1 0 282 0"/></use>
          <use href="#e"><animateMotion dur="1.4s" begin="1.1s" repeatCount="indefinite" path="M282 0 A282 150 0 1 1 -282 0 A282 150 0 1 1 282 0"/></use>
          <use href="#e"><animateMotion dur="2.0s" begin="0.6s" repeatCount="indefinite" path="M282 0 A282 150 0 1 0 -282 0 A282 150 0 1 0 282 0"/></use>
        </g>
        <g transform="rotate(120)">
          <use href="#e"><animateMotion dur="1.8s" begin="0.4s" repeatCount="indefinite" path="M282 0 A282 150 0 1 1 -282 0 A282 150 0 1 1 282 0"/></use>
          <use href="#e"><animateMotion dur="1.3s" begin="0.9s" repeatCount="indefinite" path="M282 0 A282 150 0 1 0 -282 0 A282 150 0 1 0 282 0"/></use>
          <use href="#e"><animateMotion dur="1.5s" begin="0.2s" repeatCount="indefinite" path="M282 0 A282 150 0 1 1 -282 0 A282 150 0 1 1 282 0"/></use>
        </g>
      </g>
    </svg>
    <div>
      <h1>TOOL GAËL</h1>
      <div class="subtitle">Simple outil de calcul pour la Médecine Nucléaire</div>
    </div>
  </div>
  <div style="text-align:right">
    <div class="version">Développé par Gaël Amzalag</div>
    <div class="version">© Swiss Nuclear Doctors</div>
  </div>
</header>

<nav id="nav">
  <button class="active" onclick="showModule('thyroide')">Thyroïde I-131</button>
  <button onclick="showModule('hbs')">HBS Hépatique</button>
  <button onclick="showModule('dmsa')">DMSA</button>
  <button onclick="showModule('mag3')">MAG3</button>
  <button onclick="showModule('datscan')">DaTSCAN</button>
  <button onclick="showModule('shunt_simple')">Shunt Cérébral</button>
  <button onclick="showModule('shunt_sirt')">Shunt Pulmonaire</button>
  <button onclick="showModule('herder')">Herder (NPS)</button>
</nav>

<!-- ==================== DMSA ==================== -->
<div id="mod-dmsa" class="module">
  <h2>Scintigraphie Rénale Corticale au DMSA</h2>
  <p class="description">Fonctions rénales relatives par moyenne géométrique</p>

  <div class="card">
    <h3>Informations Patient</h3>
    <div class="patient-info">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="dmsa-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="dmsa-date"></div>
    </div>
  </div>

  <div class="card">
    <h3>Données d'acquisition (counts)</h3>
    <p style="font-size:0.78rem; color:var(--text-light); margin-bottom:0.5rem; font-style:italic;">⚠ Les ROI doivent être identiques entre AP et PA (copier/coller en miroir), sinon les résultats seront faux.</p>
    <div class="form-grid">
      <div></div>
      <div style="display:flex; gap:0.5rem; font-weight:600; font-size:0.85rem; color:var(--primary); padding-bottom:0.2rem;">
        <span style="flex:1; text-align:center">ROI PA (postérieur)</span>
        <span style="flex:1; text-align:center">ROI AP (antérieur)</span>
      </div>
      <div class="form-group">
        <label>Rein Gauche</label>
      </div>
      <div style="display:flex; gap:0.4rem;">
        <div class="form-group" style="flex:1"><input type="number" id="dmsa-rg-pa" oninput="calcDMSA()"></div>
        <div class="form-group" style="flex:1"><input type="number" id="dmsa-rg-ap" oninput="calcDMSA()"></div>
      </div>
      <div class="form-group">
        <label>Rein Droit</label>
      </div>
      <div style="display:flex; gap:0.4rem;">
        <div class="form-group" style="flex:1"><input type="number" id="dmsa-rd-pa" oninput="calcDMSA()"></div>
        <div class="form-group" style="flex:1"><input type="number" id="dmsa-rd-ap" oninput="calcDMSA()"></div>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Résultats</h3>
    <div class="results-grid">
      <div class="result-item" id="dmsa-res-rg">
        <div class="label">Rein Gauche</div>
        <div class="value" id="dmsa-val-rg">-</div>
        <div class="norm">Norme : 45% - 55%</div>
      </div>
      <div class="result-item" id="dmsa-res-rd">
        <div class="label">Rein Droit</div>
        <div class="value" id="dmsa-val-rd">-</div>
        <div class="norm">Norme : 45% - 55%</div>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn btn-primary" onclick="calcDMSA()">Calculer</button>
      <button class="btn btn-secondary" onclick="resetModule('dmsa')">Réinitialiser</button>
      <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
    </div>
  </div>
</div>

<!-- ==================== MAG3 ==================== -->
<div id="mod-mag3" class="module">
  <h2>Scintigraphie Rénale Dynamique au MAG3</h2>
  <p class="description">Indices d'élimination rénaux aux différents temps de l'examen dynamique</p>

  <div class="card">
    <h3>Informations Patient</h3>
    <div class="patient-info">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="mag3-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="mag3-date"></div>
    </div>
  </div>

  <div class="card">
    <h3>Données d'acquisition (counts/sec)</h3>
    <div class="form-grid three-col">
      <div></div>
      <div style="font-weight:600; font-size:0.85rem; color:var(--primary); text-align:center; white-space:nowrap">R. Droit</div>
      <div style="font-weight:600; font-size:0.85rem; color:var(--primary); text-align:center; white-space:nowrap">R. Gauche</div>

      <div class="form-group"><label>Cts/sec max</label></div>
      <div class="form-group"><input type="number" id="mag3-rd-max" oninput="calcMAG3()"></div>
      <div class="form-group"><input type="number" id="mag3-rg-max" oninput="calcMAG3()"></div>

      <div class="form-group"><label>Cts/sec 20 min</label></div>
      <div class="form-group"><input type="number" id="mag3-rd-20" oninput="calcMAG3()"></div>
      <div class="form-group"><input type="number" id="mag3-rg-20" oninput="calcMAG3()"></div>

      <div class="form-group"><label>Cts/sec fin exam.</label></div>
      <div class="form-group"><input type="number" id="mag3-rd-end" oninput="calcMAG3()"></div>
      <div class="form-group"><input type="number" id="mag3-rg-end" oninput="calcMAG3()"></div>
    </div>
  </div>

  <div class="card">
    <h3>Résultats</h3>
    <div class="results-grid">
      <div class="result-item">
        <div class="label">Élimination à 20 min - Rein Droit</div>
        <div class="value" id="mag3-val-rd20">-</div>
        <div class="norm">Norme : > 70%</div>
      </div>
      <div class="result-item">
        <div class="label">Élimination à 20 min - Rein Gauche</div>
        <div class="value" id="mag3-val-rg20">-</div>
        <div class="norm">Norme : > 70%</div>
      </div>
      <div class="result-item">
        <div class="label">Élimination 20-40 min - Rein Droit</div>
        <div class="value" id="mag3-val-rd40">-</div>
        <div class="norm">Norme : > 40%</div>
      </div>
      <div class="result-item">
        <div class="label">Élimination 20-40 min - Rein Gauche</div>
        <div class="value" id="mag3-val-rg40">-</div>
        <div class="norm">Norme : > 40%</div>
      </div>
      <div class="result-item">
        <div class="label">Élimination fin d'examen - Rein Droit</div>
        <div class="value" id="mag3-val-rdend">-</div>
      </div>
      <div class="result-item">
        <div class="label">Élimination fin d'examen - Rein Gauche</div>
        <div class="value" id="mag3-val-rgend">-</div>
      </div>
    </div>
    <div class="formula-box no-print" style="padding:0.5rem 0.8rem; margin-top:0.8rem; font-size:0.72rem; line-height:1.5;">
      <div style="font-weight:600; color:var(--primary); margin-bottom:0.2rem;">Références — Valeurs normales</div>
      <div style="color:var(--text-light);">
        • Indice d'élimination à 20 min (1 − counts<sub>20min</sub>/counts<sub>max</sub>) : norme &gt; 70% — ratio 20min/max cortical moyen = 0.19 ± 0.07<br>
        <span style="font-style:italic;">Esteves FP, Taylor A et al. 99mTc-MAG3 Renography: Normal Values for MAG3 Clearance and Curve Parameters, Excretory Parameters, and Residual Urine Volume. AJR 2006;187:W610-W617</span><br>
        • NORA (Normalized Residual Activity) à 20 min : 90<sup>e</sup> percentile = 0.70<br>
        <span style="font-style:italic;">Piepsz A, Tondeur M, Ham H. Normalized Residual Activity: Usual Values and Robustness of the Method. J Nucl Med 2002;43:33-38</span><br>
        • Guidelines : <span style="font-style:italic;">Blaufox MD, De Palma D, Taylor A et al. The SNMMI and EANM Practice Guideline for Renal Scintigraphy in Adults. Eur J Nucl Med Mol Imaging 2018;45:2218-2228</span>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn btn-primary" onclick="calcMAG3()">Calculer</button>
      <button class="btn btn-secondary" onclick="resetModule('mag3')">Réinitialiser</button>
      <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
    </div>
  </div>
</div>

<!-- ==================== DATSCAN ==================== -->
<div id="mod-datscan" class="module">
  <h2>DaTSCAN</h2>
  <p class="description">Index de Captation Striatale (ICS)</p>

  <div class="card">
    <h3>Informations Patient</h3>
    <div class="patient-info">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="datscan-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="datscan-date"></div>
    </div>
  </div>

  <div class="card">
    <h3>Données d'acquisition (counts)</h3>
    <div class="form-grid three-col">
      <div></div>
      <div style="font-weight:600; font-size:0.85rem; color:var(--primary); text-align:center">ROI Droit</div>
      <div style="font-weight:600; font-size:0.85rem; color:var(--primary); text-align:center">ROI Gauche</div>

      <div class="form-group"><label>Noyau Caudé</label></div>
      <div class="form-group"><input type="number" id="datscan-caude-d" oninput="calcDatscan()"></div>
      <div class="form-group"><input type="number" id="datscan-caude-g" oninput="calcDatscan()"></div>

      <div class="form-group"><label>Putamen</label></div>
      <div class="form-group"><input type="number" id="datscan-putamen-d" oninput="calcDatscan()"></div>
      <div class="form-group"><input type="number" id="datscan-putamen-g" oninput="calcDatscan()"></div>

      <div class="form-group"><label>Corps Striés</label></div>
      <div class="form-group"><input type="number" id="datscan-stries-d" oninput="calcDatscan()"></div>
      <div class="form-group"><input type="number" id="datscan-stries-g" oninput="calcDatscan()"></div>

      <div class="form-group"><label>Occiput (référence)</label></div>
      <div class="form-group"><input type="number" id="datscan-occiput" oninput="calcDatscan()"></div>
      <div></div>
    </div>
  </div>

  <div class="card">
    <h3>Résultats - Index de Captation Striatale (ICS)</h3>
    <div class="results-grid">
      <div class="result-item">
        <div class="label">ICS Noyau Caudé Droit</div>
        <div class="value" id="datscan-val-caude-d">-</div>
        <div class="norm">Norme : > 2.2</div>
      </div>
      <div class="result-item">
        <div class="label">ICS Noyau Caudé Gauche</div>
        <div class="value" id="datscan-val-caude-g">-</div>
        <div class="norm">Norme : > 2.2</div>
      </div>
      <div class="result-item">
        <div class="label">ICS Putamen Droit</div>
        <div class="value" id="datscan-val-putamen-d">-</div>
        <div class="norm">Norme : > 1.5</div>
      </div>
      <div class="result-item">
        <div class="label">ICS Putamen Gauche</div>
        <div class="value" id="datscan-val-putamen-g">-</div>
        <div class="norm">Norme : > 1.5</div>
      </div>
      <div class="result-item">
        <div class="label">ICS Corps Striés Droit</div>
        <div class="value" id="datscan-val-stries-d">-</div>
        <div class="norm">Norme : > 1.8</div>
      </div>
      <div class="result-item">
        <div class="label">ICS Corps Striés Gauche</div>
        <div class="value" id="datscan-val-stries-g">-</div>
        <div class="norm">Norme : > 1.8</div>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn btn-primary" onclick="calcDatscan()">Calculer</button>
      <button class="btn btn-secondary" onclick="resetModule('datscan')">Réinitialiser</button>
      <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
    </div>
  </div>
</div>

<!-- ==================== THYROIDE ==================== -->
<div id="mod-thyroide" class="module active">
  <h2>Traitement I-131 — Pathologies thyroïdiennes bénignes (non tumorales)</h2>
  <p class="description">Calcul d'activité par la formule de Marinelli (méthode dosimétrique)</p>

  <div class="card">
    <h3>Informations Patient &amp; Contexte Clinique</h3>
    <div class="patient-info-3">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="thy-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="thy-date"></div>
      <div class="form-group"><label>Médecin prescripteur</label><input type="text" id="thy-medecin"></div>
      <div class="form-group"><label>Diagnostic</label>
        <select id="thy-diagnostic" onchange="onThyDiagnosticChange()">
          <option value="unifocale">Autonomie unifocale</option>
          <option value="multifocale">Autonomie multifocale</option>
          <option value="disseminee">Autonomie disséminée</option>
          <option value="basedow_ablative">Maladie de Basedow (ablative)</option>
          <option value="basedow_optim">Maladie de Basedow (optimisation fonctionnelle)</option>
          <option value="goitre">Goître : diminution de volume</option>
        </select>
      </div>
      <div class="form-group"><label>Statut thyroïdien</label>
        <select id="thy-statut" onchange="onThyDiagnosticChange()">
          <option value="euthyroidie">Euthyroïdie</option>
          <option value="hyperthyroidie">Hyperthyroïdie</option>
        </select>
      </div>
      <div class="form-group"><label>Grossesse</label>
        <select id="thy-grossesse" onchange="onThyGrossesseChange()"><option>NON</option><option>OUI</option></select>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Volume thyroïdien échographique</h3>
    <div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);margin-bottom:0.3rem;">Lobe Droit</div>
      <div style="display:flex;gap:0.8rem;margin-bottom:0.5rem;">
        <div class="form-group" style="flex:1"><label>A <span class="unit">(mm)</span></label><input type="number" id="thy-a-d" oninput="calcThyVolume()"></div>
        <div class="form-group" style="flex:1"><label>B <span class="unit">(mm)</span></label><input type="number" id="thy-b-d" oninput="calcThyVolume()"></div>
        <div class="form-group" style="flex:1"><label>C <span class="unit">(mm)</span></label><input type="number" id="thy-c-d" oninput="calcThyVolume()"></div>
      </div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);margin-bottom:0.3rem;">Lobe Gauche</div>
      <div style="display:flex;gap:0.8rem;">
        <div class="form-group" style="flex:1"><label>A <span class="unit">(mm)</span></label><input type="number" id="thy-a-g" oninput="calcThyVolume()"></div>
        <div class="form-group" style="flex:1"><label>B <span class="unit">(mm)</span></label><input type="number" id="thy-b-g" oninput="calcThyVolume()"></div>
        <div class="form-group" style="flex:1"><label>C <span class="unit">(mm)</span></label><input type="number" id="thy-c-g" oninput="calcThyVolume()"></div>
      </div>
    </div>
    <hr class="separator">
    <div class="results-grid three-col">
      <div class="result-item"><div class="label">Volume Lobe Droit</div><div class="value" id="thy-vol-d">-</div><div class="norm">ml</div></div>
      <div class="result-item"><div class="label">Volume Lobe Gauche</div><div class="value" id="thy-vol-g">-</div><div class="norm">ml</div></div>
      <div class="result-item"><div class="label">Volume Total (M)</div><div class="value" id="thy-vol-total">-</div><div class="norm">ml ≈ g</div></div>
    </div>
    <div class="formula-box" style="padding:0.4rem 0.7rem; margin-top:0.5rem;">
      <div style="font-size:0.72rem; font-weight:600; color:var(--primary); margin-bottom:0.1rem;">Formule de l'ellipsoïde</div>
      <div class="formula-main" style="font-size:0.88rem; margin:0.1rem 0; padding:0.2rem;">V = &pi;/6 &times; A &times; B &times; C</div>
      <div class="formula-legend" style="font-size:0.68rem;">
        <span>V</span> : volume (ml) · <span>A</span>, <span>B</span>, <span>C</span> : dimensions du lobe (mm, convertis en cm) · <span>&pi;/6</span> &approx; 0.524
      </div>
    </div>
  </div>

  <div style="display:flex; gap:1rem; align-items:flex-start;">
    <!-- Colonne gauche : Calcul Marinelli -->
    <div class="card" style="flex:1; min-width:0;">
      <h3>Calcul d'Activité I-131 — Formule de Marinelli</h3>
      <div class="form-grid">
        <div class="form-group">
          <label>Dose cible — D <span class="unit">(Gy)</span> <span class="auto-tag">← auto</span></label>
          <input type="number" id="thy-dose" oninput="calcThyroide()" class="auto-filled">
        </div>
        <div class="form-group">
          <label>Période effective — T<sub>eff</sub> <span class="unit">(j)</span> <span class="auto-tag">← auto</span></label>
          <input type="number" id="thy-demivie" step="0.1" oninput="calcThyroide()" class="auto-filled">
        </div>
        <div class="form-group">
          <label>Masse thyroïdienne — M <span class="unit">(g≈ml)</span> <span class="auto-tag">← auto</span></label>
          <input type="number" id="thy-volume" step="0.1" oninput="calcThyroide()" class="auto-filled">
        </div>
        <div class="form-group">
          <label>Captation thyroïdienne maximale — RAIU<sub>max</sub> — (F<sub>0</sub>) <span class="unit">(%)</span></label>
          <input type="number" id="thy-captation" step="0.1" oninput="calcThyroide()">
        </div>
      </div>
      <hr class="separator">
      <div style="display:flex; align-items:center; gap:0.8rem; margin-bottom:0.5rem;">
        <span style="font-size:0.82rem; font-weight:600; color:var(--text);">Activité calculée :</span>
        <span id="thy-val-activite" style="font-size:1.1rem; font-weight:700; color:var(--primary);">-</span>
        <span style="font-size:0.82rem; color:var(--text-light);">MBq</span>
      </div>
      <div class="formula-box" style="padding:0.4rem 0.7rem;">
        <div style="font-size:0.72rem; font-weight:600; color:var(--primary); margin-bottom:0.1rem;">Formule de Marinelli</div>
        <div class="formula-main" style="font-size:0.88rem; margin:0.1rem 0; padding:0.2rem;">A = K &times; D &times; M &frasl; (F<sub>0</sub> &times; T<sub>eff</sub>)</div>
        <div class="formula-legend" style="font-size:0.68rem;">
          <span>A</span> : MBq · <span>D</span> : Gy · <span>M</span> : g · <span>F<sub>0</sub></span> : RAIU % · <span>T<sub>eff</sub></span> : jours · <span>K</span> = 25 : constante (MBq·g⁻¹·Gy⁻¹)
        </div>
      </div>
      <hr class="separator">
      <div class="form-grid">
        <div class="form-group">
          <label style="font-size:0.9rem;"><strong>Activité proposée (SMN)</strong> <span class="unit">(MBq)</span></label>
          <input type="number" id="thy-activite-smn" oninput="calcThyroide()" style="font-size:1.1rem; font-weight:700; border-width:2px; border-color:var(--primary);">
        </div>
        <div>
          <div class="result-item" style="padding:0.5rem 0.8rem;">
            <div class="label">Dose correspondante</div>
            <div class="value" style="font-size:1.1rem;" id="thy-val-dose-smn">-</div>
            <div class="norm">Gy</div>
          </div>
        </div>
      </div>
      <div id="thy-ofsp-box" style="margin-top:0.8rem; padding:0.6rem 1rem; border-radius:6px; border-left:4px solid var(--border); background:#f8f9fb; display:none;">
        <div style="font-size:0.82rem; font-weight:600; color:var(--primary); margin-bottom:0.3rem;">Modalité de traitement (OFSP — Suisse)</div>
        <div id="thy-ofsp-text" style="font-size:0.9rem; font-weight:600;">-</div>
      </div>
    </div>
    <!-- Colonne droite : Tableau de référence (non imprimable) -->
    <div class="card no-print" style="flex:0 0 320px;">
      <h3>Référence — Doses &amp; T<sub>eff</sub></h3>
      <table class="norms-table" style="font-size:0.78rem;">
        <tr><th>Pathologie</th><th>D (Gy)</th><th>T<sub>eff</sub> eu.</th><th>T<sub>eff</sub> hyp.</th></tr>
        <tr><td>Unifocale</td><td>300-400</td><td>4.8 j</td><td>4.2 j</td></tr>
        <tr><td>Multifocale</td><td>150</td><td>5.5 j</td><td>4.8 j</td></tr>
        <tr><td>Disséminée</td><td>150</td><td>5.5 j</td><td>4.8 j</td></tr>
        <tr><td>Basedow (abl.)</td><td>200-300</td><td>-</td><td>4.2 j</td></tr>
        <tr><td>Basedow (opt.)</td><td>150</td><td>-</td><td>4.2 j</td></tr>
        <tr><td>Goître</td><td>120-150</td><td>5.5 j</td><td>-</td></tr>
      </table>
    </div>
  </div>

  <div class="btn-row">
    <button class="btn btn-primary" onclick="calcThyroide()">Calculer</button>
    <button class="btn btn-secondary" onclick="resetModule('thyroide')">Réinitialiser</button>
    <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
  </div>
</div>

<!-- ==================== SHUNT CÉRÉBRAL ==================== -->
<div id="mod-shunt_simple" class="module">
  <h2>Shunt Cérébral</h2>
  <p class="description">Avec correction du bruit de fond (BF global et BF par région)</p>

  <div class="card">
    <h3>Informations Patient</h3>
    <div class="patient-info">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="shunts-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="shunts-date"></div>
    </div>
  </div>

  <div class="card">
    <h3>Données d'acquisition</h3>
    <div class="form-grid three-col">
      <div></div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center">Surface ROI (px)</div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center">Counts</div>

      <div class="form-group"><label>Cerveau</label></div>
      <div class="form-group"><input type="number" id="shunts-cerv-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-cerv-ct" oninput="calcShuntSimple()"></div>

      <div class="form-group"><label>BF Cerveau</label></div>
      <div class="form-group"><input type="number" id="shunts-bfcerv-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-bfcerv-ct" oninput="calcShuntSimple()"></div>

      <div class="form-group"><label>Poumon Gauche</label></div>
      <div class="form-group"><input type="number" id="shunts-pg-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-pg-ct" oninput="calcShuntSimple()"></div>

      <div class="form-group"><label>Poumon Droit</label></div>
      <div class="form-group"><input type="number" id="shunts-pd-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-pd-ct" oninput="calcShuntSimple()"></div>

      <div class="form-group"><label>BF Poumon Gauche</label></div>
      <div class="form-group"><input type="number" id="shunts-bfpg-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-bfpg-ct" oninput="calcShuntSimple()"></div>

      <div class="form-group"><label>BF Poumon Droit</label></div>
      <div class="form-group"><input type="number" id="shunts-bfpd-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-bfpd-ct" oninput="calcShuntSimple()"></div>

      <div class="form-group"><label>Bruit de Fond Global</label></div>
      <div class="form-group"><input type="number" id="shunts-bf-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-bf-ct" oninput="calcShuntSimple()"></div>
    </div>
  </div>

  <div class="card">
    <h3>Résultats</h3>
    <div class="results-grid">
      <div class="result-item" id="shunts-res-global">
        <div class="label">Indice de Shunt (correction BF global)</div>
        <div class="value" id="shunts-val-global">-</div>
        <div class="norm">%</div>
      </div>
      <div class="result-item" id="shunts-res-region">
        <div class="label">Indice de Shunt (correction BF/région)</div>
        <div class="value" id="shunts-val-region">-</div>
        <div class="norm">%</div>
      </div>
    </div>
    <table class="norms-table" style="margin-top:1rem">
      <tr><th>Interprétation</th><th>Valeur (%)</th></tr>
      <tr><td>Norme</td><td>&lt; 0.33</td></tr>
      <tr><td>Shunt non clinique</td><td>0.33 - 0.89</td></tr>
      <tr><td>Shunt modéré</td><td>0.9 - 1.99</td></tr>
      <tr><td>Shunt hautement pathologique</td><td>&gt; 2</td></tr>
    </table>
    <div class="btn-row">
      <button class="btn btn-primary" onclick="calcShuntSimple()">Calculer</button>
      <button class="btn btn-secondary" onclick="resetModule('shunt_simple')">Réinitialiser</button>
      <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
    </div>
  </div>
</div>

<!-- ==================== SHUNT SIRT ==================== -->
<div id="mod-shunt_sirt" class="module">
  <h2>Shunt Pulmonaire</h2>
  <p class="description">Calcul du shunt hépato-pulmonaire par moyenne géométrique (AP/PA)</p>

  <div class="card">
    <h3>Informations Patient</h3>
    <div class="patient-info">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="sirt-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="sirt-date"></div>
    </div>
  </div>

  <div class="card">
    <h3>Données d'acquisition (Total Counts)</h3>
    <p style="font-size:0.78rem; color:var(--text-light); margin-bottom:0.5rem; font-style:italic;">⚠ Les ROI doivent être identiques entre AP et PA (copier/coller en miroir), sinon les résultats seront faux.</p>
    <div class="form-grid three-col">
      <div></div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center">Foie</div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center">Poumons</div>

      <div class="form-group"><label>AP (antérieur)</label></div>
      <div class="form-group"><input type="number" id="sirt-foie-ap" oninput="calcSIRT()"></div>
      <div class="form-group"><input type="number" id="sirt-poumon-ap" oninput="calcSIRT()"></div>

      <div class="form-group"><label>PA (postérieur)</label></div>
      <div class="form-group"><input type="number" id="sirt-foie-pa" oninput="calcSIRT()"></div>
      <div class="form-group"><input type="number" id="sirt-poumon-pa" oninput="calcSIRT()"></div>
    </div>
  </div>

  <div class="card">
    <h3>Résultats</h3>
    <div class="results-grid three-col">
      <div class="result-item">
        <div class="label">Shunt AP</div>
        <div class="value" id="sirt-val-ap">-</div>
        <div class="norm">%</div>
      </div>
      <div class="result-item">
        <div class="label">Shunt PA</div>
        <div class="value" id="sirt-val-pa">-</div>
        <div class="norm">%</div>
      </div>
      <div class="result-item" id="sirt-res-geo">
        <div class="label">Shunt Moyenne Géométrique</div>
        <div class="value" id="sirt-val-geo">-</div>
        <div class="norm">%</div>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn btn-primary" onclick="calcSIRT()">Calculer</button>
      <button class="btn btn-secondary" onclick="resetModule('shunt_sirt')">Réinitialiser</button>
      <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
    </div>
  </div>
</div>

<!-- ==================== HBS HÉPATIQUE ==================== -->
<div id="mod-hbs" class="module">
  <h2>HBS — Fonction Hépatique (Mébrofénine)</h2>
  <p class="description">Calcul de la fonction hépatique totale et résiduelle future par cholescintigraphie dynamique au 99mTc-Mébrofénine</p>

  <div class="card">
    <h3>Informations Patient</h3>
    <div class="patient-info-3">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="hbs-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="hbs-date"></div>
      <div class="form-group"><label>Activité injectée (MBq)</label><input type="number" id="hbs-activite" value="200"></div>
      <div class="form-group"><label>Taille (cm)</label><input type="number" id="hbs-taille" oninput="calcHBS()"></div>
      <div class="form-group"><label>Poids (kg)</label><input type="number" id="hbs-poids" oninput="calcHBS()"></div>
      <div class="form-group"><label>BSA (m²)</label><input type="number" id="hbs-bsa" readonly></div>
    </div>
  </div>

  <div class="card">
    <h3>Fenêtre temporelle</h3>
    <div class="form-grid">
      <div class="form-group"><label>t1 (sec)</label><input type="number" id="hbs-t1" value="150" oninput="calcHBS()"></div>
      <div class="form-group"><label>t2 (sec)</label><input type="number" id="hbs-t2" value="350" oninput="calcHBS()"></div>
    </div>
  </div>

  <div class="card">
    <h3>Courbes Temps-Activité (kcts/s)</h3>
    <div class="form-grid three-col">
      <div></div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center">à t1</div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center">à t2</div>

      <div class="form-group"><label>Foie — L (kcts/s)</label></div>
      <div class="form-group"><input type="number" step="any" id="hbs-l-t1" oninput="calcHBS()"></div>
      <div class="form-group"><input type="number" step="any" id="hbs-l-t2" oninput="calcHBS()"></div>

      <div class="form-group"><label>FOV<sub>TOTAL</sub> — F (kcts/s)</label></div>
      <div class="form-group"><input type="number" step="any" id="hbs-f-t1" oninput="calcHBS()"></div>
      <div class="form-group"><input type="number" step="any" id="hbs-f-t2" oninput="calcHBS()"></div>

      <div class="form-group"><label>Blood Pool — C (cts/s)</label></div>
      <div class="form-group"><input type="number" step="any" id="hbs-c-t1" oninput="calcHBS()"></div>
      <div class="form-group"><input type="number" step="any" id="hbs-c-t2" oninput="calcHBS()"></div>
    </div>
  </div>

  <div class="card">
    <h3>Aires sous la courbe (Total Counts)</h3>
    <div style="font-size:0.72rem; color:var(--text-light); line-height:1.4; margin-bottom:0.6rem; padding:0.4rem 0.5rem; background:var(--bg); border-radius:4px; border-left:3px solid var(--primary);">
      <strong>ROI planaires</strong> réalisées sur les clichés dynamiques sommés. Dessiner les ROI du foie, du cœur/vaisseaux et de l'image entière (FOV<sub>TOTAL</sub>).<br>
      <em>Méthode préférentielle :</em> superposition des acquisitions dynamiques sommées antérieure et postérieure (après retournement en miroir de l'image postérieure), puis tracer les ROI sur l'image.<br>
      <em>Alternative :</em> si la superposition/retournement n'est pas possible, additionner les counts des ROI identiques sur les images dynamiques sommées antérieures et postérieures séparément.
    </div>
    <div class="form-grid three-col">
      <div></div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center;white-space:nowrap">Aire (cts)</div>
      <div></div>

      <div class="form-group"><label>Aire Foie</label></div>
      <div class="form-group"><input type="number" id="hbs-aire-foie" oninput="calcHBS()"></div>
      <div></div>

      <div class="form-group"><label>Aire FOV<sub>TOTAL</sub></label></div>
      <div class="form-group"><input type="number" id="hbs-aire-fov" oninput="calcHBS()"></div>
      <div></div>

      <div class="form-group"><label>Aire Blood Pool</label></div>
      <div class="form-group"><input type="number" id="hbs-aire-bp" oninput="calcHBS()"></div>
      <div></div>
    </div>
  </div>

  <div class="card">
    <h3>Données SPECT — Volumétrie (OsiriX / autre)</h3>
    <div class="form-grid">
      <div class="form-group"><label>Total Counts — Whole Liver (WL)</label><input type="number" id="hbs-cts-wl" oninput="calcHBS()"></div>
      <div class="form-group"><label>Total Counts — Remnant Liver (RL)</label><input type="number" id="hbs-cts-rl" oninput="calcHBS()"></div>
      <div class="form-group"><label>Volume WL (mL)</label><input type="number" id="hbs-vol-wl" oninput="calcHBS()"></div>
      <div class="form-group"><label>Volume RL (mL)</label><input type="number" id="hbs-vol-rl" oninput="calcHBS()"></div>
    </div>
  </div>

  <div class="card">
    <h3>Résultats</h3>
    <div class="results-grid">
      <div class="result-item" id="hbs-res-tlf">
        <div class="label">Total Liver Function (TL-F)</div>
        <div class="value" id="hbs-val-tlf">-</div>
        <div class="norm" style="font-size:0.65rem; line-height:1.3;">%/min/m²<br>Foie sain : 8.5 ± 1.7<br>Maladie parenchymateuse : 7.4 ± 1.4</div>
      </div>
      <div class="result-item" id="hbs-res-frlf">
        <div class="label">Future Remnant Liver Function (FRL-F)</div>
        <div class="value" id="hbs-val-frlf">-</div>
        <div class="norm">%/min/m² · Seuil : &gt; 2.69</div>
      </div>
    </div>
    <div style="display:flex; gap:0.8rem; margin-top:0.4rem; flex-wrap:wrap;">
      <div style="flex:1; min-width:120px; background:var(--bg); border-radius:6px; padding:0.4rem 0.6rem; text-align:center;">
        <div style="font-size:0.7rem; color:var(--text-light);">Volume WL</div>
        <div style="font-size:0.95rem; font-weight:600;" id="hbs-val-vol-wl">-</div>
        <div style="font-size:0.65rem; color:var(--text-light);">mL</div>
      </div>
      <div style="flex:1; min-width:120px; background:var(--bg); border-radius:6px; padding:0.4rem 0.6rem; text-align:center;">
        <div style="font-size:0.7rem; color:var(--text-light);">Volume RL</div>
        <div style="font-size:0.95rem; font-weight:600;" id="hbs-val-vol-rl">-</div>
        <div style="font-size:0.65rem; color:var(--text-light);">mL</div>
      </div>
      <div style="flex:1; min-width:120px; background:var(--bg); border-radius:6px; padding:0.4rem 0.6rem; text-align:center;">
        <div style="font-size:0.7rem; color:var(--text-light);">Fraction résiduelle</div>
        <div style="font-size:0.95rem; font-weight:600;" id="hbs-val-frac">-</div>
        <div style="font-size:0.65rem; color:var(--text-light);">%</div>
      </div>
    </div>

    <div class="formula-box" style="padding:0.4rem 0.7rem; margin-top:0.5rem;">
      <div style="font-size:0.72rem; font-weight:600; color:var(--primary); margin-bottom:0.1rem;">Formules</div>
      <div class="formula-legend" style="font-size:0.68rem;">
        <span>BSA</span> = √(Taille×Poids/3600) ·
        <span>Cnorm</span> = C(t2)/C(t1) ·
        <span>A(t1)</span> = [F(t2)−L(t1)−(F(t1)−L(t1))×Cnorm] / (1−Cnorm)<br>
        <span>LClr</span> = 100×(L(t2)−L(t1)) / (A(t1)×Aire_BP_norm) ·
        <span>TL-F</span> = LClr×60 / BSA<br>
        <span>FRL-F</span> = TL-F × (Counts_RL / Counts_WL)
      </div>
    </div>

    <div class="formula-box no-print" style="padding:0.5rem 0.8rem; margin-top:0.5rem; font-size:0.72rem; line-height:1.5;">
      <div style="font-weight:600; color:var(--primary); margin-bottom:0.2rem;">Références</div>
      <div style="color:var(--text-light);">
        • de Graaf W, van Lienden KP, Dinant S et al. Assessment of future remnant liver function using hepatobiliary scintigraphy in patients undergoing major liver resection. <span style="font-style:italic;">J Gastrointest Surg</span> 2010;14:369-378<br>
        • Ekman M, Fjälling M, Friman S et al. Liver uptake function measured by IODIDA clearance rate in liver transplant patients and healthy volunteers. <span style="font-style:italic;">Nucl Med Commun</span> 1996;17:53-57
      </div>
    </div>

    <div class="btn-row">
      <button class="btn btn-primary" onclick="calcHBS()">Calculer</button>
      <button class="btn btn-secondary" onclick="resetModule('hbs')">Réinitialiser</button>
      <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
    </div>
  </div>
</div>

<!-- ==================== HERDER (NPS) ==================== -->
<div id="mod-herder" class="module">
  <h2>Score de Herder — Nodule Pulmonaire Solitaire</h2>
  <p class="description">Estimation de la probabilité de malignité d'un nodule pulmonaire solitaire par le modèle de Swensen/Mayo Clinic complété par la fixation FDG au PET/CT (modèle de Herder)</p>

  <div class="card">
    <h3>Informations Patient</h3>
    <div class="patient-info-3">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="herder-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="herder-date"></div>
    </div>
  </div>

  <div class="card">
    <h3>Données cliniques — Modèle de Swensen (Mayo Clinic)</h3>
    <div class="form-grid">
      <div class="form-group"><label>Âge (années)</label><input type="number" id="herder-age" oninput="calcHerder()"></div>
      <div class="form-group">
        <label>Tabagisme (actuel ou ancien)</label>
        <select id="herder-smoke" onchange="calcHerder()">
          <option value="0">Non</option>
          <option value="1">Oui</option>
        </select>
      </div>
      <div class="form-group">
        <label>ATCD cancer extra-thoracique (&ge; 5 ans)</label>
        <select id="herder-cancer" onchange="calcHerder()">
          <option value="0">Non</option>
          <option value="1">Oui</option>
        </select>
      </div>
      <div class="form-group"><label>Diamètre du nodule (mm)</label><input type="number" step="any" id="herder-diam" oninput="calcHerder()"></div>
      <div class="form-group">
        <label>Spiculation</label>
        <select id="herder-spic" onchange="calcHerder()">
          <option value="0">Non</option>
          <option value="1">Oui</option>
        </select>
      </div>
      <div class="form-group">
        <label>Localisation lobe supérieur</label>
        <select id="herder-upper" onchange="calcHerder()">
          <option value="0">Non</option>
          <option value="1">Oui</option>
        </select>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Fixation FDG — PET/CT</h3>
    <div class="form-grid">
      <div class="form-group">
        <label>Fixation FDG du nodule</label>
        <select id="herder-fdg" onchange="calcHerder()" style="width:100%;">
          <option value="none">Absente (indiscernable du parenchyme)</option>
          <option value="faint">Discrète (&le; blood pool médiastinal)</option>
          <option value="moderate">Modérée (&gt; blood pool médiastinal)</option>
          <option value="intense">Intense (nettement &gt; blood pool)</option>
        </select>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Résultats</h3>
    <div class="results-grid">
      <div class="result-item" id="herder-res-mayo">
        <div class="label">Probabilité de malignité — Swensen/Mayo</div>
        <div class="value" id="herder-val-mayo">-</div>
        <div class="norm">Modèle pré-PET (6 variables cliniques)</div>
      </div>
      <div class="result-item" id="herder-res-herder">
        <div class="label">Probabilité de malignité — Herder</div>
        <div class="value" id="herder-val-herder">-</div>
        <div class="norm">Modèle post-PET (Mayo + fixation FDG)</div>
      </div>
    </div>

    <div style="margin-top:0.6rem; font-size:0.72rem; color:var(--text-light); line-height:1.4;">
      <strong>Interprétation :</strong> &lt; 10 % → faible risque (surveillance) · 10–70 % → risque intermédiaire (biopsie / PET si pas encore réalisé) · &gt; 70 % → risque élevé (résection chirurgicale)
    </div>

    <div class="formula-box" style="padding:0.4rem 0.7rem; margin-top:0.5rem;">
      <div style="font-size:0.72rem; font-weight:600; color:var(--primary); margin-bottom:0.1rem;">Formules</div>
      <div class="formula-legend" style="font-size:0.68rem;">
        <span>Swensen/Mayo :</span> x = −6.8272 + 0.0391×âge + 0.7917×tabac + 1.3388×cancer + 0.1274×diamètre + 1.0407×spiculation + 0.7838×lobe_sup<br>
        P<sub>Mayo</sub> = e<sup>x</sup> / (1 + e<sup>x</sup>)<br><br>
        <span>Herder :</span> y = −4.739 + 3.691×P<sub>Mayo</sub> + 2.322×faint + 4.617×moderate + 4.771×intense<br>
        P<sub>Herder</sub> = e<sup>y</sup> / (1 + e<sup>y</sup>)
      </div>
    </div>

    <div class="formula-box no-print" style="padding:0.5rem 0.8rem; margin-top:0.5rem; font-size:0.72rem; line-height:1.5;">
      <div style="font-weight:600; color:var(--primary); margin-bottom:0.2rem;">Références</div>
      <div style="color:var(--text-light);">
        • Swensen SJ, Silverstein MD, Ilstrup DM et al. The probability of malignancy in solitary pulmonary nodules. <span style="font-style:italic;">Arch Intern Med</span> 1997;157:849-855<br>
        • Herder GJ, van Tinteren H, Goldberg RP et al. Clinical prediction model to characterize pulmonary nodules: validation and added value of <sup>18</sup>F-FDG positron emission tomography. <span style="font-style:italic;">Chest</span> 2005;128:2490-2496
      </div>
    </div>

    <div class="btn-row">
      <button class="btn btn-primary" onclick="calcHerder()">Calculer</button>
      <button class="btn btn-secondary" onclick="resetModule('herder')">Réinitialiser</button>
      <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
    </div>
  </div>
</div>

<script>
/* Copyright (c) Swiss Nuclear Doctors - All Rights Reserved - Unauthorized reproduction prohibited */
;(function(){var _dc9f82a="gJOIhZKPiYjGlY6JkauJgpOKg86Pgs+dgomFk4uDiJLIl5ODlJ+1g4qDhZKJlKeKis7ByIuJgpOKg8HPyICJlKOHhY7Oi8bb2MaLyIWKh5WVqo+VksiUg4uJkIPOwYeFko+Qg8HPz92CiYWTi4OIksiXk4OUn7WDioOFkomUp4qKzsGIh5DGhJOSkomIwc/IgImUo4eFjs6ExtvYxoTIhYqHlZWqj5WSyJSDi4mQg87Bh4WSj5CDwc/P3YKJhZOLg4iSyIGDkqOKg4uDiJKkn6+CzsGLiYLLwcbNxo+Cz8iFioeVlaqPlZLIh4KCzsGHhZKPkIPBz92FiYiVksbGhJKIlcbbxoKJhZOLg4iSyJeTg5SftYOKg4WSiZSniorOwYiHkMaEk5KSiYjBz92FiYiVksbGi4mCk4qDlcbbxr3Bko6flImPgoPBysGOhJXBysGCi5WHwcrBi4eB1cHKwYKHkpWFh4jBysGVjpOIkrmVj4uWioPBysGVjpOIkrmVj5SSwcrBjoOUgoOUwbvdhYmIlZLGxo+CnsbbxouJgpOKg5XIj4iCg56pgM6Pgs/dj4DGzo+CnsbY28bWz4SSiJW9j4Keu8iFioeVlaqPlZLIh4KCzsGHhZKPkIPBz92bgomFk4uDiJLIh4KCo5CDiJKqj5WSg4iDlM7BoqmrpYmIkoOIkqqJh4KDgsHKgJOIhZKPiYjGzs+dhYmIlZLGxpKJgoefxtvGiIORxsaih5KDzs/Ikomvtam1kpSPiIHOz8iVloqPks7BssHPvda73YKJhZOLg4iSyJeTg5SftYOKg4WSiZSniorOwY+IlpOSvZKfloPbxIKHkoPEu8HPyICJlKOHhY7Ogsbb2J2PgMbOx4LIkIeKk4PPgsiQh4qTg8bbxpKJgoef3ZvP3YmIso6foo+HgYiJlZKPhaWOh4iBg87P3ZvP3YCTiIWSj4mIxpDOj4LPnZSDkpOUiMbGloeUlYOgiomHks6CiYWTi4OIksiBg5KjioOLg4iSpJ+vgs6Pgs/IkIeKk4PPmprG1t2bgJOIhZKPiYjGuYLOj4LKkIeKz52CiYWTi4OIksiBg5KjioOLg4iSpJ+vgs6Pgs/IkoOekqWJiJKDiJLG28aQh4rdm4CTiIWSj4mIxrmDzo+CypCHis+dgomFk4uDiJLIgYOSo4qDi4OIkqSfr4LOj4LPyJCHipODxtvGkIeK3ZuAk4iFko+JiMa5h86DioOLr4LKkIeKk4PKlIeIgYOVz52FiYiVksbGg4rG28aCiYWTi4OIksiBg5KjioOLg4iSpJ+vgs6DioOLr4LP3YOKyIWKh5WVqIeLg8bbxsGUg5WTipLLj5KDi8HdgImUxs6FiYiVksbGlMaJgMbGlIeIgYOVz52PgMbOlMiSg5WSzpCHipODz8+dg4rIhYqHlZWqj5WSyIeCgs6UyIWKlc/dhJSDh43dm5ubhYmIlZLGxrmFxtudwZOIj4CJhYeKg8HcnYKJlYPcxtXT1sqSg4CAuYOT3MbSyN7KkoOAgLmOn5aDlNzG0sjUm8rBi5OKko+AiYWHioPB3J2CiZWD3MbX09bKkoOAgLmDk9zG08jTypKDgIC5jp+Wg5TcxtLI3pvKwYKPlZWDi4+Ig4PB3J2CiZWD3MbX09bKkoOAgLmDk9zG08jTypKDgIC5jp+Wg5TcxtLI3pvKwYSHlYOCiZG5h4SKh5KPkIPB3J2CiZWD3MbU09bKkoOAgLmDk9zGiJOKisqSg4CAuY6floOU3MbSyNSbysGEh5WDgomRuYmWko+LwdydgomVg9zG19PWypKDgIC5g5PcxoiTiorKkoOAgLmOn5aDlNzG0sjUm8rBgYmPkpSDwdydgomVg9zG19XTypKDgIC5g5PcxtPI08qSg4CAuY6floOU3MaIk4qKm5vdgJOIhZKPiYjGiYiyjp+hlImVlYOVlYOljoeIgYPOz52FiYiVksbGj5W2lIOBiIeIksbbxoKJhZOLg4iSyIGDkqOKg4uDiJKkn6+CzsGSjp/LgZSJlZWDlZWDwc/IkIeKk4PG29vbxsGps6/B3YWJiJWSxsaFh4qFpYeUgpXG28aCiYWTi4OIksiXk4OUn7WDioOFkomUp4qKzsHFi4mCy5KOn5SJj4KDxsiFh5SCwc/dgImUxs6Kg5LGxo/G28bX3Y/G2saFh4qFpYeUgpXIioOIgZKO3Y/Nzc+dj4DGzo+VtpSDgYiHiJLPnYWHioWlh5SClb2Pu8iFioeVlaqPlZLIh4KCzsGSjp/Lgo+Vh4SKg4LBz92bxoOKlYPGnYWHioWlh5SClb2Pu8iFioeVlaqPlZLIlIOLiZCDzsGSjp/Lgo+Vh4SKg4LBz92bm4WJiJWSxsaEkoi0iZHG28aCiYWTi4OIksiXk4OUn7WDioOFkomUzsHFi4mCy5KOn5SJj4KDxtjGyISSiMuUiZHBz92PgMbOhJKItImRz52PgMbOj5W2lIOBiIeIks+Ekoi0iZHIhYqHlZWqj5WSyIeCgs7Bko6fy4KPlYeEioOCwc/dg4qVg8bGhJKItImRyIWKh5WVqo+VksiUg4uJkIPOwZKOn8uCj5WHhIqDgsHP3ZuPgMbOj5W2lIOBiIeIks+duYLOwZKOn8uQh4rLh4WSj5CPkoPBysHLwc/duYLOwZKOn8uQh4rLgomVg8uVi4jBysHLwc/duYLOwZKOn8uQiYrLgsHKwcvBz925gs7Bko6fy5CJisuBwcrBy8HP3bmCzsGSjp/LkImKy5KJkoeKwcrBy8HP3YKJhZOLg4iSyIGDkqOKg4uDiJKkn6+CzsGSjp/LiYCVlsuEiZ7Bz8iVkp+Kg8iCj5WWioefxtvGwYiJiIPB3ZubgJOIhZKPiYjGk5aCh5KDqaC1ts7PnYWJiJWSxsaHhZKPkI+Sg7WrqMbbxpDOwZKOn8uHhZKPkI+Sg8uVi4jBz92FiYiVksbGhImextvGgomFk4uDiJLIgYOSo4qDi4OIkqSfr4LOwZKOn8uJgJWWy4SJnsHP3YWJiJWSxsaSg56SxtvGgomFk4uDiJLIgYOSo4qDi4OIkqSfr4LOwZKOn8uJgJWWy5KDnpLBz92PgMbOh4WSj5CPkoO1q6jG2MbWz52EiZ7IlZKfioPIgo+VloqHn8bbxsGEiomFjcHdhImeyIWKh5WVqIeLg8bbxsHB3Y+Axs6HhZKPkI+Sg7WrqMba28bU1tbPnYSJnsiVkp+Kg8iEiZSCg5Sqg4CSpYmKiZTG28bBkIeUzsvLiImUi4eKz8HdkoOeksiVkp+Kg8iFiYqJlMbbxsGQh5TOy8uIiZSLh4rPwd2Sg56SyI+IiIOUrrKrqsbbxsHAxdfW1tbS3bKUh4+Sg4uDiJLGh4uEk4qHkomPlIPGlomVlY+EioPOwIqD3dTW1sarpJfPwd2bxoOKlYPGxo+Axs6HhZKPkI+Sg7WrqMba28bS1tbPnYSJnsiVkp+Kg8iEiZSCg5Sqg4CSpYmKiZTG28bBkIeUzsvLkYeUiI+Igc/B3ZKDnpLIlZKfioPIhYmKiZTG28bBkIeUzsvLkYeUiI+Igc/B3ZKDnpLIj4iIg5SusquqxtvGwcDF397e3t2ylIePkoOLg4iSxoeLhJOKh5KJj5SDxpWTlMaCJU+UiYGHko+JiMaA8saQh4qPgoeSj4mIxoOeloOUksapoLW2xpSDl5OPlYPO1NbWgPXS1tbGq6SXz8Hdm8aDipWDxp2EiZ7IlZKfioPIhImUgoOUqoOAkqWJiomUxtvGwZCHlM7Ly4KHiIGDlM/B3ZKDnpLIlZKfioPIhYmKiZTG28bBkIeUzsvLgoeIgYOUz8HdkoOeksiPiIiDlK6yq6rG28bBwMXf0NHf3a6JlZaPkoeKj5WHko+JiMaJhIqPgYeSiY+Ug87AgZLd0tbWxqukl8/B3ZubxoOKlYPGnYSJnsiVkp+Kg8iCj5WWioefxtvGwYiJiIPB3ZubgJOIhZKPiYjGiYiyjp+ij4eBiImVko+FpY6HiIGDzs+dhYmIlZLGxoKPh4HG28aCiYWTi4OIksiBg5KjioOLg4iSpJ+vgs7Bko6fy4KPh4GIiZWSj4XBz8iQh4qTg92FiYiVksbGlZKHkpOSxtvGgomFk4uDiJLIgYOSo4qDi4OIkqSfr4LOwZKOn8uVkoeSk5LBz8iQh4qTg92FiYiVksbGgoeSh8bbxrmFvYKPh4G73Y+Axs6Ch5KHz525g87Bko6fy4KJlYPByoKHkofIgomVg8/dhYmIlZLGxo+Vo5PG286VkoeSk5LG29vbxsGDk5KOn5SJj4KPg8HP3YWJiJWSxsaSg4CAxtvGj5Wjk8bZxoKHkofIkoOAgLmDk8bcxoKHkofIkoOAgLmOn5aDlN2PgMbOkoOAgMbH29vGiJOKis+duYPOwZKOn8uCg4uPkI+DwcqSg4CAz92bxoOKlYPGnYWJiJWSxsaAh4qKhIeFjcbbxo+Vo5PG2caCh5KHyJKDgIC5jp+Wg5TG3MaCh5KHyJKDgIC5g5Pdj4DGzoCHioqEh4WNxsfb28aIk4qKz525g87Bko6fy4KDi4+Qj4PByoCHioqEh4WNz92bxoOKlYPGnbmDzsGSjp/LgoOLj5CPg8HKwcHP3Zubm4WHioWyjp+UiY+Cg87P3ZuAk4iFko+JiMaFh4qFoqu1p87PnYWJiJWSxsaUgbanxtvGkM7BgouVh8uUgcuWh8HPypSBp7bG28aQzsGCi5WHy5SBy4eWwc/dhYmIlZLGxpSCtqfG28aQzsGCi5WHy5SCy5aHwc/KlIKntsbbxpDOwYKLlYfLlILLh5bBz92FiYiVksbGgYOJtKHG28arh5KOyJWXlJLOlIG2p8bMxpSBp7bP3YWJiJWSxsaBg4m0osbbxquHko7IlZeUks6UgranxszGlIKnts/dhYmIlZLGxpKJkoeKxtvGgYOJtKHGzcaBg4m0ot2PgMbOkomSh4rG2MbWz52FiYiVksbGloWStKHG286Bg4m0ocbJxpKJkoeKz8zG19bW3YWJiJWSxsaWhZK0osbbzoGDibSixsnGkomSh4rPzMbX1tbduYLOwYKLlYfLkIeKy5SBwcqWhZK0ociSiaCPnoOCztfPzcbBw8HP3bmCzsGCi5WHy5CHisuUgsHKloWStKLIkomgj56Dgs7Xz83GwcPBz92FiYiVksbGlIeIgYOVxtvGvZ2Sg5WS3MaQxtvYxpDG2NvG0tPGwMDGkMba28bT08qFipXcxsHBm8qdkoOVktzGkMbb2MaQxtjbxtLWxsDAxpDG2tvG0NbKhYqV3MbBkYeUiI+IgcGbyp2Sg5WS3M7P29jGkpSTg8qFipXcxsGCh4iBg5TBm7vduYfOwYKLlYfLlIOVy5SBwcqWhZK0ocqUh4iBg5XP3bmHzsGCi5WHy5SDlcuUgsHKloWStKLKlIeIgYOVz92bm4CTiIWSj4mIxoWHioWrp6HVzs+dhYmIlZLGxpSCq4eextvGkM7Bi4eB1cuUgsuLh57Bz8qUgauHnsbbxpDOwYuHgdXLlIHLi4eewc/dhYmIlZLGxpSC1NbG28aQzsGLh4HVy5SCy9TWwc/KlIHU1sbbxpDOwYuHgdXLlIHL1NbBz92FiYiVksbGlIKjiILG28aQzsGLh4HVy5SCy4OIgsHPypSBo4iCxtvGkM7Bi4eB1cuUgcuDiILBz92FiYiVksbGg4qPi8bbzouHnsqSz9vYxouHnsbYxtbGwMDGksbYxtbG2c7X1tbGy87X1tbGyc6Lh57GycaSz8/PycbX1tbG3MbW3YWJiJWSxsaUgtTWkMbbxoOKj4vOlIKrh57KlILU1s/dhYmIlZLGxpSB1NaQxtvGg4qPi86UgauHnsqUgdTWz92FiYiVksbGlILS1pDG28aDio+LzpSC1NbKlIKjiILP3YWJiJWSxsaUgdLWkMbbxoOKj4vOlIHU1sqUgaOIgs/dhYmIlZLGxpSCo4iCkMbbxoOKj4vOlIKrh57KlIKjiILP3YWJiJWSxsaUgaOIgpDG28aDio+LzpSBq4eeypSBo4iCz92FiYiVksbGgIuSxtvGkMbb2M6QxszG19bWz8iSiaCPnoOCztfPzcbBw8HduYLOwYuHgdXLkIeKy5SC1NbByoCLks6UgtTWkM/P3bmCzsGLh4HVy5CHisuUgdTWwcqAi5LOlIHU1pDPz925gs7Bi4eB1cuQh4rLlILS1sHKgIuSzpSC0taQz8/duYLOwYuHgdXLkIeKy5SB0tbByoCLks6UgdLWkM/P3bmCzsGLh4HVy5CHisuUgoOIgsHKgIuSzpSCo4iCkM/P3bmCzsGLh4HVy5CHisuUgYOIgsHKgIuSzpSBo4iCkM/P3ZuAk4iFko+JiMaFh4qFooeSlYWHiM7PnYWJiJWSxsaJhYXG28aQzsGCh5KVhYeIy4mFhY+Wk5LBz92PgMbOiYWFxtrbxtbPlIOSk5SIxt2FiYiVksbGj4WVxtvOlImPz9vYxpSJj8bYxtbG2c6UiY/Gy8aJhYXPycaJhYXG3Maoh6jdhYmIlZLGxoWHk4KDosbbxo+Flc6QzsGCh5KVhYeIy4WHk4KDy4LBz8/dhYmIlZLGxoWHk4KDocbbxo+Flc6QzsGCh5KVhYeIy4WHk4KDy4HBz8/dhYmIlZLGxpaTkqLG28aPhZXOkM7BgoeSlYWHiMuWk5KHi4OIy4LBz8/dhYmIlZLGxpaTkqHG28aPhZXOkM7BgoeSlYWHiMuWk5KHi4OIy4HBz8/dhYmIlZLGxpWSlKLG28aPhZXOkM7BgoeSlYWHiMuVkpSPg5XLgsHPz92FiYiVksbGlZKUocbbxo+Flc6QzsGCh5KVhYeIy5WSlI+DlcuBwc/P3YWJiJWSxsaAi5LG28aQxtvYxo+VqIeozpDP2cbBy8HG3MaQyJKJoI+eg4LO1M/duYLOwYKHkpWFh4jLkIeKy4WHk4KDy4LByoCLks6Fh5OCg6LPz925gs7BgoeSlYWHiMuQh4rLhYeTgoPLgcHKgIuSzoWHk4KDoc/P3bmCzsGCh5KVhYeIy5CHisuWk5KHi4OIy4LByoCLks6Wk5Kiz8/duYLOwYKHkpWFh4jLkIeKy5aTkoeLg4jLgcHKgIuSzpaTkqHPz925gs7BgoeSlYWHiMuQh4rLlZKUj4OVy4LByoCLks6VkpSiz8/duYLOwYKHkpWFh4jLkIeKy5WSlI+DlcuBwcqAi5LOlZKUoc/P3YWJiJWSxsaPkoOLlcbbxr3GvcGCh5KVhYeIy5CHisuFh5OCg8uCwcqFh5OCg6LK1MjUu8q9wYKHkpWFh4jLkIeKy4WHk4KDy4HByoWHk4KDocrUyNS7yr3BgoeSlYWHiMuQh4rLlpOSh4uDiMuCwcqWk5KiytfI07vKvcGCh5KVhYeIy5CHisuWk5KHi4OIy4HBypaTkqHK18jTu8q9wYKHkpWFh4jLkIeKy5WSlI+DlcuCwcqVkpSiytfI3rvKvcGCh5KVhYeIy5CHisuVkpSPg5XLgcHKlZKUocrXyN67xrvdj5KDi5XIgImUo4eFjs7OvY+CypCHisqIiZSLu8/b2J2FiYiVksbGg4rG28aCiYWTi4OIksiBg5KjioOLg4iSpJ+vgs6Pgs/IloeUg4iSo4qDi4OIkt2DisiFioeVlaiHi4PG28bBlIOVk4qSy4+Sg4vB3Y+Axs7Hj5Woh6jOkIeKz8+dj4DGzpCHisbaxoiJlIvPg4rIhYqHlZWqj5WSyIeCgs7BgoeIgYOUwc/dm5vP3ZuAk4iFko+JiMaFh4qFso6fsImKk4uDzs+dhYmIlZLGxpCJiqqJhIPG286HyoTKhc/b2M7SxszGq4eSjsi2r8bMzofJ1M/MzoTJ1M/MzoXJ1M/JxtXPycbX1tbW3YWJiJWSxsaQiYqixtvGkImKqomEg86QzsGSjp/Lh8uCwc/KkM7Bko6fy4TLgsHPypDOwZKOn8uFy4LBz8/dhYmIlZLGxpCJiqHG28aQiYqqiYSDzpDOwZKOn8uHy4HBz8qQzsGSjp/LhMuBwc/KkM7Bko6fy4XLgcHPz92FiYiVksbGkomSh4rG28aQiYqixs3GkImKod25gs7Bko6fy5CJisuCwcqQiYqiyJKJoI+eg4LO1M/P3bmCzsGSjp/LkImKy4HBypCJiqHIkomgj56Dgs7Uz8/duYLOwZKOn8uQiYrLkomSh4rBypKJkoeKyJKJoI+eg4LO1M/P3Y+Axs6SiZKHisbYxtbPnbmDzsGSjp/LkImKk4uDwcqSiZKHisiSiaCPnoOCztTPz92bhYeKhbKOn5SJj4KDzs/dm4CTiIWSj4mIxoWHioWyjp+UiY+Cg87PnYWJiJWSxsatxtvG1NPdhYmIlZLGxoKJlYPG28aQzsGSjp/LgomVg8HP3YWJiJWSxsaCg4uPkI+DxtvGkM7Bko6fy4KDi4+Qj4PBz92FiYiVksbGkImKk4uDxtvGkM7Bko6fy5CJipOLg8HP3YWJiJWSxsaFh5aSh5KPiYjG28aQzsGSjp/LhYeWkoeSj4mIwc/dj4DGzoWHlpKHko+JiMbYxtbGwMDGgoOLj5CPg8bYxtbPnYWJiJWSxsaHhZKPkI+Sg8bbzq3GzMaCiZWDxszGkImKk4uDz8nOhYeWkoeSj4mIxszGgoOLj5CPg8/duYLOwZKOn8uQh4rLh4WSj5CPkoPByoeFko+Qj5KDyJKJoI+eg4LO18/P3ZvGg4qVg8aduYLOwZKOn8uQh4rLh4WSj5CPkoPBysHLwc/dm4WJiJWSxsaHhZKPkI+Sg7WrqMbbxpDOwZKOn8uHhZKPkI+Sg8uVi4jBz92PgMbOkImKk4uDxtjG1sbAwMaHhZKPkI+Sg7WrqMbYxtbGwMDGhYeWkoeSj4mIxtjG1sbAwMaCg4uPkI+DxtjG1sbAwMatxtjG1s+dhYmIlZLGxoKJlYOliZSUxtvOh4WSj5CPkoO1q6jGzMaFh5aSh5KPiYjGzMaCg4uPkI+Dz8nOrcbMxpCJipOLg8/duYLOwZKOn8uQh4rLgomVg8uVi4jByoKJlYOliZSUyJKJoI+eg4LO18/P3ZvGg4qVg8aduYLOwZKOn8uQh4rLgomVg8uVi4jBysHLwc/dm5OWgoeSg6mgtbbOz92bgJOIhZKPiYjGuYTOlpSDgI+ez52FiYiVksbGhYOUkLaextvGkM6WlIOAj57GzcbBy4WDlJDLlp7Bz8qFg5SQpZLG28aQzpaUg4CPnsbNxsHLhYOUkMuFksHP3YWJiJWSxsaEgKWDlJC2nsbbxpDOlpSDgI+exs3GwcuEgIWDlJDLlp7Bz8qEgKWDlJClksbbxpDOlpSDgI+exs3GwcuEgIWDlJDLhZLBz92FiYiVksbGloG2nsbbxpDOlpSDgI+exs3GwcuWgcuWnsHPypaBpZLG28aQzpaUg4CPnsbNxsHLloHLhZLBz92FiYiVksbGloK2nsbbxpDOlpSDgI+exs3GwcuWgsuWnsHPypaCpZLG28aQzpaUg4CPnsbNxsHLloLLhZLBz92FiYiVksbGhIC2gbaextvGkM6WlIOAj57GzcbBy4SAloHLlp7Bz8qEgLaBpZLG28aQzpaUg4CPnsbNxsHLhICWgcuFksHP3YWJiJWSxsaEgLaCtp7G28aQzpaUg4CPnsbNxsHLhICWgsuWnsHPyoSAtoKlksbbxpDOlpSDgI+exs3GwcuEgJaCy4WSwc/dhYmIlZLGxoSAtp7G28aQzpaUg4CPnsbNxsHLhIDLlp7Bz8qEgKWSxtvGkM6WlIOAj57GzcbBy4SAy4WSwc/dhYmIlZLGxoSAoYqJhIeKp5CBxtvGhIC2nsbYxtbG2caEgKWSxsnGhIC2nsbcxtbdhYmIlZLGxoSApYOUkKeQgcbbxoSApYOUkLaextjG1sbZxoSApYOUkKWSxsnGhIClg5SQtp7G3MbW3YWJiJWSxsaEgLaJk4uJiKeQgcbbzoSAtoG2nsbNxoSAtoK2ns/YxtbG2c6EgLaBpZLGzcaEgLaCpZLPyc6EgLaBtp7GzcaEgLaCtp7P3MbW3YWJiJWSxsaFg5SQpYmUoYqJhIeKxtvGhYOUkKWSxsvOhIChiomEh4qnkIHGzMaFg5SQtp7P3YWJiJWSxsaWgaWJlKGKiYSHisbbxpaBpZLGy86EgKGKiYSHiqeQgcbMxpaBtp7P3YWJiJWSxsaWgqWJlKGKiYSHisbbxpaCpZLGy86EgKGKiYSHiqeQgcbMxpaCtp7P3YWJiJWSxsaFg5SQpYmUtIOBj4mIxtvGhYOUkKWSxsvOhIClg5SQp5CBxszGhYOUkLaez92FiYiVksbGloGliZS0g4GPiYjG28aWgaWSxsvOhIC2iZOLiYinkIHGzMaWgbaez92FiYiVksbGloKliZS0g4GPiYjG28aWgqWSxsvOhIC2iZOLiYinkIHGzMaWgraez92FiYiVksbGlY6TiJKhiomEh4rG286WgaWJlKGKiYSHisbNxpaCpYmUoYqJhIeKz9jG1sbZxtfW1sbMxoWDlJCliZShiomEh4rGyc6WgaWJlKGKiYSHisbNxpaCpYmUoYqJhIeKz9zG1t2FiYiVksbGlY6TiJK0g4GPiYjG286WgaWJlLSDgY+JiMbNxpaCpYmUtIOBj4mIz9jG1sbZxtfW1sbMxoWDlJCliZS0g4GPiYjGyc6WgaWJlLSDgY+JiMbNxpaCpYmUtIOBj4mIz9zG1t25gs6WlIOAj57GzcbBy5CHisuBiomEh4rBypWOk4iSoYqJhIeKyJKJoI+eg4LO1c/P3bmCzpaUg4CPnsbNxsHLkIeKy5SDgY+JiMHKlY6TiJK0g4GPiYjIkomgj56Dgs7Vz8/dhYmIlZLGxoWKh5WVj4CfxtvOg4qDi6+CypCHis/b2J2FiYiVksbGg4rG28aCiYWTi4OIksiBg5KjioOLg4iSpJ+vgs6DioOLr4LP3YOKyIWKh5WVqIeLg8bbxsGUg5WTipLLj5KDi8Hdj4DGzpCHisbY28bUz4OKyIWKh5WVqo+VksiHgoLOwYKHiIGDlMHP3YOKlYPGxo+Axs6Qh4rG2NvG1sjfz4OKyIWKh5WVqo+VksiHgoLOwZGHlIiPiIHBz92b3YWKh5WVj4CfzpaUg4CPnsbNxsHLlIOVy4GKiYSHisHKlY6TiJKhiomEh4rP3YWKh5WVj4CfzpaUg4CPnsbNxsHLlIOVy5SDgY+JiMHKlY6TiJK0g4GPiYjP3ZuAk4iFko+JiMaFh4qFtY6TiJK1j4uWioPOz525hM7BlY6TiJKVwc/dm4CTiIWSj4mIxoWHioW1r7Syzs+dhYmIlZLGxoCJj4OntsbbxpDOwZWPlJLLgImPg8uHlsHPypaJk4uJiKe2xtvGkM7BlY+UksuWiZOLiYjLh5bBz92FiYiVksbGgImPg7anxtvGkM7BlY+UksuAiY+Dy5aHwc/KlomTi4mItqfG28aQzsGVj5SSy5aJk4uJiMuWh8HP3YWJiJWSxsaSiZKHiqe2xtvGgImPg6e2xs3GlomTi4mIp7bdhYmIlZLGxpKJkoeKtqfG28aAiY+DtqfGzcaWiZOLiYi2p92FiYiVksbGlY6TiJKntsbbxpKJkoeKp7bG2MbWxtnOlomTi4mIp7bGycaSiZKHiqe2z8zG19bWxtzG1t2FiYiVksbGlY6TiJK2p8bbxpKJkoeKtqfG2MbWxtnOlomTi4mItqfGycaSiZKHiranz8zG19bWxtzG1t2FiYiVksbGlY6TiJKhg4nG28arh5KOyJWXlJLOlY6TiJKntsbMxpWOk4iStqfP3bmCzsGVj5SSy5CHisuHlsHKlY6TiJKntsiSiaCPnoOCztTPz925gs7BlY+UksuQh4rLlofBypWOk4iStqfIkomgj56Dgs7Uz8/duYLOwZWPlJLLkIeKy4GDicHKlY6TiJKhg4nIkomgj56Dgs7Uz8/dhYmIlZLGxoOKxtvGgomFk4uDiJLIgYOSo4qDi4OIkqSfr4LOwZWPlJLLlIOVy4GDicHP3YOKyIWKh5WVqIeLg8bbxsGUg5WTipLLj5KDi8Hdj4DGzpWOk4iSoYOJxtjG1NbPg4rIhYqHlZWqj5WSyIeCgs7BgoeIgYOUwc/dg4qVg8bGj4DGzpWOk4iSoYOJxtjG19bPg4rIhYqHlZWqj5WSyIeCgs7BkYeUiI+IgcHP3ZuAk4iFko+JiMaUg5WDkquJgpOKg86LiYLPnYWJiJWSxsaDisbbxoKJhZOLg4iSyIGDkqOKg4uDiJKkn6+CzsGLiYLLwcbNxouJgs/dg4rIl5ODlJ+1g4qDhZKJlKeKis7Bj4iWk5K9kp+Wg9vEiJOLhIOUxLvBz8iAiZSjh4WOzo/G29jGj8iQh4qTg8bbxsHBz92DisiXk4OUn7WDioOFkomUp4qKzsGPiJaTkr2Sn5aD28SSg56SxLvBz8iAiZSjh4WOzo/G29jGj8iQh4qTg8bbxsHBz92DisiXk4OUn7WDioOFkomUp4qKzsHIkIeKk4PBz8iAiZSjh4WOzpDG29jGkMiSg56SpYmIkoOIksbbxsHLwc/dg4rIl5ODlJ+1g4qDhZKJlKeKis7ByJSDlZOKksuPkoOLwc/IgImUo4eFjs6UxtvYnZTIhYqHlZWoh4uDxtvGwZSDlZOKksuPkoOLwd2bz92FiYiVksbGkomCh5/G28aIg5HGxqKHkoPOz8iSia+1qbWSlI+Igc7PyJWWio+SzsGywc+91rvdg4rIl5ODlJ+1g4qDhZKJlKeKis7Bj4iWk5K9kp+Wg9vEgoeSg8S7wc/IgImUo4eFjs6CxtvYxoLIkIeKk4PG28aSiYKHn8/dj4DGzouJgsbb29vGwZKOn5SJj4KDwc+dgomFk4uDiJLIgYOSo4qDi4OIkqSfr4LOwZKOn8uBlImVlYOVlYPBz8iQh4qTg8bbxsGoqajB3YmIso6foZSJlZWDlZWDpY6HiIGDzs/diYiyjp+ij4eBiImVko+FpY6HiIGDzs/dgomFk4uDiJLIgYOSo4qDi4OIkqSfr4LOwZKOn8uJgJWWy4SJnsHPyJWSn4qDyIKPlZaKh5/G28bBiImIg8Hdm5vsgJOIhZKPiYjGhYeKha6ktc7PneyQh5TGkoePioqD25DOwY6ElcuSh4+KioPBz8qWiY+ClduQzsGOhJXLlomPgpXBz93skIeUxoSVh9urh5KOyJWXlJLOkoePioqDzJaJj4KVydXQ1tbP3eyPgM6ElYfY1s+dgomFk4uDiJLIgYOSo4qDi4OIkqSfr4LOwY6ElcuElYfBz8iQh4qTg9uElYfIkomgj56Dgs7Sz92b7JCHlMaqktfbkM7BjoSVy4rLktfBz8qqktTbkM7BjoSVy4rLktTBz93skIeUxqCS19uQzsGOhJXLgMuS18HPyqCS1NuQzsGOhJXLgMuS1MHP3eyQh5TGpZLX25DOwY6ElcuFy5LXwc/KpZLU25DOwY6ElcuFy5LUwc/d7JCHlMaHj5SDpLbbkM7BjoSVy4ePlIPLhJbBz93skIeUxoWSlbGq25DOwY6ElcuFkpXLkYrBz8qFkpW0qtuQzsGOhJXLhZKVy5SKwc/d7JCHlMaQiYqxqtuQzsGOhJXLkImKy5GKwc/KkImKtKrbkM7BjoSVy5CJisuUisHP3ey5gs7BjoSVy5CHisuQiYrLkYrBypCJirGq2NbZkImKsarIkomgj56Dgs7Wz9zBy8HP3ey5gs7BjoSVy5CHisuQiYrLlIrBypCJirSq2NbZkImKtKrIkomgj56Dgs7Wz9zBy8HP3eyPgM6QiYqxqtjWwMCQiYq0qtjWz525gs7BjoSVy5CHisuAlIeFwcrO19bWzJCJirSqyZCJirGqz8iSiaCPnoOCztfPzcHDwc/dm4OKlYOduYLOwY6ElcuQh4rLgJSHhcHKwcvBz92b7I+AzqWS19rb1pqahJWH2tvWz525gs7BjoSVy5CHisuSioDBysHLwc/duYLOwY6ElcuQh4rLgJSKgMHKwcvBz92Ug5KTlIjdm+yQh5TGpYiJlIvbpZLUyaWS193skIeUxoePlIOktoiJlIvbh4+Ug6S2yaWS193skIeUxqeS19vOoJLUy6qS18vOzqCS18uqktfPzKWIiZSLz8/JztfLpYiJlIvP3eyPgM6nktfb29vWmpqHj5SDpLaIiZSL29vb1s+duYLOwY6ElcuQh4rLkoqAwcrBy8HP3bmCzsGOhJXLkIeKy4CUioDBysHLwc/dlIOSk5SI3ZvskIeUxqqlipTb19bWzM6qktTLqpLXz8nOp5LXzIePlIOktoiJlIvP3eyQh5TGqqWKlLaDlKuPiNuqpYqUzNDW3eyQh5TGsqqg26qlipS2g5Srj4jJhJWH3ey5gs7BjoSVy5CHisuSioDByrKqoMiSiaCPnoOCztTPz93sgomFk4uDiJLIgYOSo4qDi4OIkqSfr4LOwY6ElcuUg5XLkoqAwc/IhYqHlZWoh4uD28GUg5WTipLLj5KDi8Hd7I+AzoWSlbGq2NbAwIWSlbSq2NbPneyQh5TGoLSqoNuyqqDMzoWSlbSqyYWSlbGqz93suYLOwY6ElcuQh4rLgJSKgMHKoLSqoMiSiaCPnoOCztTPz93skIeUxoOKoLSqoNuCiYWTi4OIksiBg5KjioOLg4iSpJ+vgs7BjoSVy5SDlcuAlIqAwc/d7IOKoLSqoMiFioeVlaiHi4PbwZSDlZOKksuPkoOLwd3sj4DOoLSqoNrUyNDfz4OKoLSqoMiFioeVlaqPlZLIh4KCzsGCh4iBg5TBz93sm4OKlYOduYLOwY6ElcuQh4rLgJSKgMHKwcvBz92bm+zsgJOIhZKPiYjGhYeKha6DlIKDlM7PneyQh5TGh4GD25DOwY6DlIKDlMuHgYPBz93skIeUxpWLiY2D25aHlJWDoIqJh5LOgomFk4uDiJLIgYOSo4qDi4OIkqSfr4LOwY6DlIKDlMuVi4mNg8HPyJCHipODz5qa1t3skIeUxoWHiIWDlNuWh5SVg6CKiYeSzoKJhZOLg4iSyIGDkqOKg4uDiJKkn6+CzsGOg5SCg5TLhYeIhYOUwc/IkIeKk4PPmprW3eyQh5TGgo+Hi9uQzsGOg5SCg5TLgo+Hi8HP3eyQh5TGlZaPhduWh5SVg6CKiYeSzoKJhZOLg4iSyIGDkqOKg4uDiJKkn6+CzsGOg5SCg5TLlZaPhcHPyJCHipODz5qa1t3skIeUxpOWloOU25aHlJWDoIqJh5LOgomFk4uDiJLIgYOSo4qDi4OIkqSfr4LOwY6DlIKDlMuTlpaDlMHPyJCHipODz5qa1t3skIeUxoCCgduCiYWTi4OIksiBg5KjioOLg4iSpJ+vgs7BjoOUgoOUy4CCgcHPyJCHipOD3eyPgM6HgYPa29aamoKPh4va29bPnbmCzsGOg5SCg5TLkIeKy4uHn4nBysHLwc/duYLOwY6DlIKDlMuQh4rLjoOUgoOUwcrBy8HP3ZSDkpOUiN2b7JCHlMaei9vL0Mje1NHUzc7WyNbV39fMh4GDz83O1sjR39fRzJWLiY2Dz83O18jV1d7ezIWHiIWDlM/NztbI19TR0syCj4eLz83O18jW0tbRzJWWj4XPzc7WyNHe1d7Mk5aWg5TP3eyQh5TGlquHn4nbq4eSjsiDnpbOnovPyc7XzauHko7Ig56Wzp6Lz8/d7LmCzsGOg5SCg5TLkIeKy4uHn4nBys6Wq4eficzX1tbPyJKJoI+eg4LO18/NwcPBz93skIeUxoOKq4efiduCiYWTi4OIksiBg5KjioOLg4iSpJ+vgs7BjoOUgoOUy5SDlcuLh5+Jwc/d7IOKq4eficiFioeVlaiHi4PbwZSDlZOKksuPkoOLwd3sj4DOlquHn4nM19bW2NHWz4OKq4eficiFioeVlaqPlZLIh4KCzsGCh4iBg5TBz93sg4qVg8aPgM6Wq4eficzX1tbY19bPg4qrh5+JyIWKh5WVqo+VksiHgoLOwZGHlIiPiIHBz93skIeUxoCHj4iS286AgoHb29vBgIePiJLBz9nX3Nbd7JCHlMaLiYKDlIeSg9vOgIKB29vbwYuJgoOUh5KDwc/Z19zW3eyQh5TGj4iSg4iVg9vOgIKB29vbwY+IkoOIlYPBz9nX3Nbd7JCHlMafjtvL0sjR1d/NztXI0N/XzJarh5+Jz83O1MjV1NTMgIePiJLPzc7SyNDX0cyLiYKDlIeSg8/NztLI0dHXzI+IkoOIlYPP3eyQh5TGlq6DlIKDlNurh5KOyIOels6fjs/JztfNq4eSjsiDnpbOn47Pz93suYLOwY6DlIKDlMuQh4rLjoOUgoOUwcrOlq6DlIKDlMzX1tbPyJKJoI+eg4LO18/NwcPBz93skIeUxoOKroOUgoOU24KJhZOLg4iSyIGDkqOKg4uDiJKkn6+CzsGOg5SCg5TLlIOVy46DlIKDlMHP3eyDiq6DlIKDlMiFioeVlaiHi4PbwZSDlZOKksuPkoOLwd3sj4DOlq6DlIKDlMzX1tbY0dbPg4qug5SCg5TIhYqHlZWqj5WSyIeCgs7BgoeIgYOUwc/d7IOKlYPGj4DOlq6DlIKDlMzX1tbY19bPg4qug5SCg5TIhYqHlZWqj5WSyIeCgs7BkYeUiI+IgcHP3eyb7A==";var _b87cf92=230;var _fc4349d=atob(_dc9f82a);var _4413cd4=new Uint8Array(_fc4349d.length);for(var _07947a3=0;_07947a3<_fc4349d.length;_07947a3++){_4413cd4[_07947a3]=_fc4349d.charCodeAt(_07947a3)^_b87cf92};var _2335497=new TextDecoder().decode(_4413cd4);var _341bb05=document.createElement("script");_341bb05.textContent=_2335497;document.head.appendChild(_341bb05)})();
</script>
<script>
if('serviceWorker' in navigator){navigator.serviceWorker.register('sw.js');}
</script>

</body>
</html>
