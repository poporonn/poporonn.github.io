<!DOCTYPE html>
<!--
  ╔══════════════════════════════════════════════════════════════════╗
  ║  TOOL GAËL — Simple outil de calcul pour la Médecine Nucléaire        ║
  ║                                                                 ║
  ║  Copyright © Swiss Nuclear Doctors — Tous droits réservés       ║
  ║  Développé par Gaël Amzalag                                     ║
  ║                                                                 ║
  ║  Ce logiciel est protégé par le droit d'auteur. Toute           ║
  ║  reproduction, distribution, modification ou utilisation         ║
  ║  non autorisée de tout ou partie de ce code est strictement     ║
  ║  interdite sans l'accord écrit préalable de l'auteur.           ║
  ║                                                                 ║
  ║  This software is protected by copyright law. Any unauthorized  ║
  ║  reproduction, distribution, modification or use of all or      ║
  ║  part of this code is strictly prohibited without prior         ║
  ║  written consent of the author.                                 ║
  ╚══════════════════════════════════════════════════════════════════╝
-->
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#1a5276">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon-180.png">
<title>TOOL GAËL - Médecine Nucléaire</title>
<style>
:root {
  --primary: #1a5276;
  --primary-light: #2980b9;
  --accent: #e74c3c;
  --bg: #f4f6f9;
  --card: #ffffff;
  --text: #2c3e50;
  --text-light: #7f8c8d;
  --border: #dce1e8;
  --input-bg: #fff8f0;
  --result-bg: #eaf7ea;
  --normal: #27ae60;
  --warning: #e67e22;
  --danger: #e74c3c;
  --auto-bg: #e8f0fe;
  --auto-border: #4a90d9;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
input, select, button { max-width: 100%; box-sizing: border-box; }
.form-group { overflow: hidden; }

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
}

header {
  background: linear-gradient(135deg, var(--primary), var(--primary-light));
  color: white;
  padding: 1.2rem 2rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

header h1 { font-size: 1.5rem; font-weight: 600; }
header .subtitle { font-size: 0.85rem; opacity: 0.85; }
header .version { font-size: 0.75rem; opacity: 0.6; }

nav {
  background: white;
  border-bottom: 1px solid var(--border);
  padding: 0 1rem;
  display: flex;
  gap: 0;
  overflow-x: auto;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

nav button {
  padding: 0.8rem 1.2rem;
  border: none;
  background: none;
  cursor: pointer;
  font-size: 0.9rem;
  color: var(--text-light);
  border-bottom: 3px solid transparent;
  transition: all 0.2s;
  white-space: nowrap;
  font-weight: 500;
}

nav button:hover { color: var(--primary); background: #f0f4f8; }
nav button.active {
  color: var(--primary);
  border-bottom-color: var(--primary);
  font-weight: 600;
}

.module { display: none; padding: 1.5rem 2rem; max-width: 1024px; margin: 0 auto; }
.module.active { display: block; }

.module h2 {
  font-size: 1.3rem;
  color: var(--primary);
  margin-bottom: 0.3rem;
}

.module .description {
  color: var(--text-light);
  font-size: 0.9rem;
  margin-bottom: 1.5rem;
}

.card {
  background: var(--card);
  border-radius: 8px;
  padding: 1.2rem 1.5rem;
  margin-bottom: 1rem;
  box-shadow: 0 1px 4px rgba(0,0,0,0.06);
  border: 1px solid var(--border);
  position: relative;
  overflow: hidden;
  max-width: 100%;
}

.card h3 {
  font-size: 1rem;
  color: var(--primary);
  margin-bottom: 0.8rem;
  padding-bottom: 0.4rem;
  border-bottom: 1px solid var(--border);
}

.form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.8rem 1.5rem;
}

.form-group { display: flex; flex-direction: column; gap: 0.3rem; }
.form-group.full { grid-column: 1 / -1; }

.form-group label {
  font-size: 0.82rem;
  font-weight: 600;
  color: var(--text);
}

.form-group label .unit {
  font-weight: 400;
  color: var(--text-light);
}

.form-group input, .form-group select {
  width: 100%;
  min-width: 0;
  padding: 0.5rem 0.7rem;
  border: 1.5px solid var(--border);
  border-radius: 5px;
  font-size: 0.95rem;
  background: var(--input-bg);
  transition: border-color 0.2s;
}

.form-group input:focus, .form-group select:focus {
  outline: none;
  border-color: var(--primary-light);
  box-shadow: 0 0 0 3px rgba(41,128,185,0.1);
}

.form-group input[readonly] {
  background: #f0f0f0;
  color: var(--text-light);
}

/* Auto-populated field style */
.form-group input.auto-filled {
  background: var(--auto-bg);
  border-color: var(--auto-border);
  font-weight: 600;
}

.auto-tag {
  font-size: 0.65rem;
  color: var(--auto-border);
  font-weight: 400;
  font-style: italic;
}

.results-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.8rem 1.5rem;
}

.result-item {
  background: var(--result-bg);
  padding: 0.8rem 1rem;
  border-radius: 6px;
  border-left: 4px solid var(--normal);
}

.result-item.full { grid-column: 1 / -1; }

.result-item .label {
  font-size: 0.78rem;
  color: var(--text-light);
  margin-bottom: 0.2rem;
}

.result-item .value {
  font-size: 1.3rem;
  font-weight: 700;
  color: var(--primary);
}

.result-item .norm {
  font-size: 0.75rem;
  color: var(--text-light);
  margin-top: 0.2rem;
}

.result-item.warning { border-left-color: var(--warning); }
.result-item.warning .value { color: var(--warning); }
.result-item.danger { border-left-color: var(--danger); }
.result-item.danger .value { color: var(--danger); }

.btn {
  padding: 0.6rem 1.5rem;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 600;
  transition: all 0.2s;
}

.btn-primary {
  background: var(--primary);
  color: white;
}
.btn-primary:hover { background: var(--primary-light); }

.btn-secondary {
  background: #ecf0f1;
  color: var(--text);
}
.btn-secondary:hover { background: #dce1e8; }

.btn-row {
  display: flex;
  gap: 0.8rem;
  margin-top: 1rem;
}

.patient-info {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.8rem;
}

.patient-info-3 {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 0.8rem;
}

.norms-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.85rem;
  margin-top: 0.5rem;
}

.norms-table th, .norms-table td {
  padding: 0.4rem 0.7rem;
  border: 1px solid var(--border);
  text-align: left;
}

.norms-table th {
  background: #f0f4f8;
  font-weight: 600;
  color: var(--primary);
}

.norms-table td:last-child { text-align: center; }

.three-col { grid-template-columns: 1fr 1fr 1fr; }

.separator {
  border: none;
  border-top: 1px solid var(--border);
  margin: 1rem 0;
}

/* Grossesse contra-indication overlay */
.thy-disabled {
  opacity: 0.35;
  pointer-events: none;
  position: relative;
}

.thy-disabled::after {
  content: "CONTRE-INDICATION — GROSSESSE";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--danger);
  background: rgba(255,255,255,0.85);
  padding: 0.5rem 1.5rem;
  border: 2px solid var(--danger);
  border-radius: 6px;
  white-space: nowrap;
  z-index: 10;
}

/* OFSP status colors */
.ofsp-ambulatoire { border-left-color: var(--normal); color: var(--normal); }
.ofsp-derogation { border-left-color: var(--warning); color: var(--warning); }
.ofsp-hospitalisation { border-left-color: var(--danger); color: var(--danger); }

/* Marinelli formula box */
.formula-box {
  background: #f8f9fb;
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 0.8rem 1rem;
  font-size: 0.82rem;
  line-height: 1.6;
}

.formula-box .formula-title {
  font-weight: 700;
  color: var(--primary);
  margin-bottom: 0.4rem;
  font-size: 0.88rem;
}

.formula-box .formula-main {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text);
  text-align: center;
  margin: 0.5rem 0;
  padding: 0.4rem;
  background: white;
  border-radius: 4px;
}

.formula-box .formula-legend {
  color: var(--text-light);
  font-size: 0.78rem;
}

.formula-box .formula-legend span {
  color: var(--text);
  font-weight: 600;
}

/* No-print utility */
.no-print { }

/* Print styles - compact 1 page */
@media print {
  @page { margin: 8mm; size: A4; }
  body { font-size: 9pt; background: white; }
  nav { display: none !important; }
  .no-print { display: none !important; }
  header { padding: 0.3rem 0.8rem; }
  header h1 { font-size: 1.1rem; }
  .module { display: none !important; padding: 0.5rem 0.8rem; }
  .module.active { display: block !important; }
  .btn-row { display: none !important; }
  .card { padding: 0.5rem 0.7rem; margin-bottom: 0.4rem; box-shadow: none; border: 1px solid #ccc; }
  .card h3 { font-size: 0.85rem; margin-bottom: 0.3rem; padding-bottom: 0.2rem; }
  .form-grid, .results-grid { gap: 0.3rem 0.8rem; }
  .form-group label { font-size: 0.72rem; }
  .form-group input, .form-group select { font-size: 0.8rem; padding: 0.2rem 0.4rem; border: 1px solid #999; }
  .result-item { padding: 0.3rem 0.5rem; }
  .result-item .value { font-size: 1rem; }
  .result-item .label { font-size: 0.7rem; }
  .result-item .norm { font-size: 0.65rem; }
  .norms-table { font-size: 0.72rem; }
  .norms-table th, .norms-table td { padding: 0.15rem 0.4rem; }
  .separator { margin: 0.4rem 0; }
  .formula-box { padding: 0.4rem 0.6rem; font-size: 0.72rem; }
  .formula-box .formula-main { font-size: 0.88rem; margin: 0.2rem 0; padding: 0.2rem; }
  .formula-box .formula-legend { font-size: 0.68rem; }
  .patient-info, .patient-info-3 { gap: 0.3rem; }
  .module h2 { font-size: 1rem; margin-bottom: 0.1rem; }
  .module .description { font-size: 0.75rem; margin-bottom: 0.5rem; }
  .three-col { grid-template-columns: 1fr 1fr 1fr; }
}

@media (max-width: 700px) {
  header { flex-direction: column; gap: 0.5rem; padding: 0.8rem 1rem; text-align: center; }
  header > div[style*="text-align:right"] { text-align: center; }
  header h1 { font-size: 1.2rem; }
  body { overflow-x: hidden; }
  .module { padding: 0.3rem; max-width: 100%; overflow-x: hidden; }
  .card { padding: 0.5rem; margin-bottom: 0.5rem; margin-left: 0; margin-right: 0; border-radius: 6px; }
  .form-grid, .results-grid, .patient-info, .patient-info-3 { grid-template-columns: 1fr; gap: 0.4rem; max-width: 100%; }
  .form-grid.three-col { grid-template-columns: auto 1fr 1fr !important; gap: 0.3rem 0.4rem; }
  .form-grid.three-col .form-group label { white-space: nowrap; font-size: 0.68rem; }
  .results-grid.three-col { grid-template-columns: 1fr !important; }
  .form-group.full, .result-item.full { grid-column: 1; }
  .form-group { max-width: 100%; }
  .form-group label { font-size: 0.72rem; }
  .form-group input, .form-group select { font-size: 0.8rem; padding: 0.3rem 0.4rem; width: 100%; max-width: 100%; }
  input[type="date"] { -webkit-appearance: none; appearance: none; }
  nav { padding: 0 0.3rem; }
  nav button { padding: 0.5rem 0.6rem; font-size: 0.72rem; }
  .btn-row { flex-wrap: wrap; }
  .btn { padding: 0.5rem 1rem; font-size: 0.82rem; }
  .norms-table { font-size: 0.75rem; }
  .formula-box { padding: 0.3rem 0.5rem !important; }
  .formula-main { font-size: 0.8rem !important; }
  .formula-legend { font-size: 0.62rem !important; }
  h2 { font-size: 1rem; }
  h3 { font-size: 0.9rem; }
  .description { font-size: 0.78rem; }
  /* Stack the 2-column thyroid layout on small screens */
  #mod-thyroide > div[style*="display:flex"] { flex-direction: column !important; }
  #mod-thyroide > div[style*="display:flex"] > .card { flex: 1 1 auto !important; }
}
</style>
</head>
<body>

<header>
  <div style="display:flex; align-items:center; gap:0.8rem;">
    <svg width="36" height="36" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg" style="border-radius:4px; flex-shrink:0;">
      <rect width="600" height="600" fill="#E60000"/>
      <g transform="translate(300 300)">
        <g stroke="white" stroke-width="12" fill="none">
          <ellipse rx="282" ry="150"/>
          <ellipse rx="282" ry="150" transform="rotate(60)"/>
          <ellipse rx="282" ry="150" transform="rotate(120)"/>
        </g>
        <g>
          <rect x="-45" y="-125" width="90" height="250" fill="white"/>
          <rect x="-125" y="-45" width="250" height="90" fill="white"/>
          <animateTransform attributeName="transform" type="scale" values="1;1.08;1" dur="1.0s" repeatCount="indefinite"/>
        </g>
        <defs><circle id="e" r="12" fill="white"/></defs>
        <g>
          <use href="#e"><animateMotion dur="1.5s" begin="0s" repeatCount="indefinite" path="M282 0 A282 150 0 1 1 -282 0 A282 150 0 1 1 282 0"/></use>
          <use href="#e"><animateMotion dur="1.9s" begin="0.5s" repeatCount="indefinite" path="M282 0 A282 150 0 1 0 -282 0 A282 150 0 1 0 282 0"/></use>
          <use href="#e"><animateMotion dur="1.7s" begin="0.8s" repeatCount="indefinite" path="M282 0 A282 150 0 1 1 -282 0 A282 150 0 1 1 282 0"/></use>
        </g>
        <g transform="rotate(60)">
          <use href="#e"><animateMotion dur="1.6s" begin="0.3s" repeatCount="indefinite" path="M282 0 A282 150 0 1 0 -282 0 A282 150 0 1 0 282 0"/></use>
          <use href="#e"><animateMotion dur="1.4s" begin="1.1s" repeatCount="indefinite" path="M282 0 A282 150 0 1 1 -282 0 A282 150 0 1 1 282 0"/></use>
          <use href="#e"><animateMotion dur="2.0s" begin="0.6s" repeatCount="indefinite" path="M282 0 A282 150 0 1 0 -282 0 A282 150 0 1 0 282 0"/></use>
        </g>
        <g transform="rotate(120)">
          <use href="#e"><animateMotion dur="1.8s" begin="0.4s" repeatCount="indefinite" path="M282 0 A282 150 0 1 1 -282 0 A282 150 0 1 1 282 0"/></use>
          <use href="#e"><animateMotion dur="1.3s" begin="0.9s" repeatCount="indefinite" path="M282 0 A282 150 0 1 0 -282 0 A282 150 0 1 0 282 0"/></use>
          <use href="#e"><animateMotion dur="1.5s" begin="0.2s" repeatCount="indefinite" path="M282 0 A282 150 0 1 1 -282 0 A282 150 0 1 1 282 0"/></use>
        </g>
      </g>
    </svg>
    <div>
      <h1>TOOL GAËL</h1>
      <div class="subtitle">Simple outil de calcul pour la Médecine Nucléaire</div>
    </div>
  </div>
  <div style="text-align:right">
    <div class="version">Développé par Gaël Amzalag</div>
    <div class="version">© Swiss Nuclear Doctors</div>
  </div>
</header>

<nav id="nav">
  <button class="active" onclick="showModule('thyroide')">Thyroïde I-131</button>
  <button onclick="showModule('hbs')">HBS Hépatique</button>
  <button onclick="showModule('dmsa')">DMSA</button>
  <button onclick="showModule('mag3')">MAG3</button>
  <button onclick="showModule('datscan')">DaTSCAN</button>
  <button onclick="showModule('shunt_simple')">Shunt Cérébral</button>
  <button onclick="showModule('shunt_sirt')">Shunt Pulmonaire</button>
</nav>

<!-- ==================== DMSA ==================== -->
<div id="mod-dmsa" class="module">
  <h2>Scintigraphie Rénale Corticale au DMSA</h2>
  <p class="description">Fonctions rénales relatives par moyenne géométrique</p>

  <div class="card">
    <h3>Informations Patient</h3>
    <div class="patient-info">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="dmsa-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="dmsa-date"></div>
    </div>
  </div>

  <div class="card">
    <h3>Données d'acquisition (counts)</h3>
    <p style="font-size:0.78rem; color:var(--text-light); margin-bottom:0.5rem; font-style:italic;">⚠ Les ROI doivent être identiques entre AP et PA (copier/coller en miroir), sinon les résultats seront faux.</p>
    <div class="form-grid">
      <div></div>
      <div style="display:flex; gap:0.5rem; font-weight:600; font-size:0.85rem; color:var(--primary); padding-bottom:0.2rem;">
        <span style="flex:1; text-align:center">ROI PA (postérieur)</span>
        <span style="flex:1; text-align:center">ROI AP (antérieur)</span>
      </div>
      <div class="form-group">
        <label>Rein Gauche</label>
      </div>
      <div style="display:flex; gap:0.4rem;">
        <div class="form-group" style="flex:1"><input type="number" id="dmsa-rg-pa" oninput="calcDMSA()"></div>
        <div class="form-group" style="flex:1"><input type="number" id="dmsa-rg-ap" oninput="calcDMSA()"></div>
      </div>
      <div class="form-group">
        <label>Rein Droit</label>
      </div>
      <div style="display:flex; gap:0.4rem;">
        <div class="form-group" style="flex:1"><input type="number" id="dmsa-rd-pa" oninput="calcDMSA()"></div>
        <div class="form-group" style="flex:1"><input type="number" id="dmsa-rd-ap" oninput="calcDMSA()"></div>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Résultats</h3>
    <div class="results-grid">
      <div class="result-item" id="dmsa-res-rg">
        <div class="label">Rein Gauche</div>
        <div class="value" id="dmsa-val-rg">-</div>
        <div class="norm">Norme : 45% - 55%</div>
      </div>
      <div class="result-item" id="dmsa-res-rd">
        <div class="label">Rein Droit</div>
        <div class="value" id="dmsa-val-rd">-</div>
        <div class="norm">Norme : 45% - 55%</div>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn btn-primary" onclick="calcDMSA()">Calculer</button>
      <button class="btn btn-secondary" onclick="resetModule('dmsa')">Réinitialiser</button>
      <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
    </div>
  </div>
</div>

<!-- ==================== MAG3 ==================== -->
<div id="mod-mag3" class="module">
  <h2>Scintigraphie Rénale Dynamique au MAG3</h2>
  <p class="description">Indices d'élimination rénaux aux différents temps de l'examen dynamique</p>

  <div class="card">
    <h3>Informations Patient</h3>
    <div class="patient-info">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="mag3-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="mag3-date"></div>
    </div>
  </div>

  <div class="card">
    <h3>Données d'acquisition (counts/sec)</h3>
    <div class="form-grid three-col">
      <div></div>
      <div style="font-weight:600; font-size:0.85rem; color:var(--primary); text-align:center; white-space:nowrap">R. Droit</div>
      <div style="font-weight:600; font-size:0.85rem; color:var(--primary); text-align:center; white-space:nowrap">R. Gauche</div>

      <div class="form-group"><label>Cts/sec max</label></div>
      <div class="form-group"><input type="number" id="mag3-rd-max" oninput="calcMAG3()"></div>
      <div class="form-group"><input type="number" id="mag3-rg-max" oninput="calcMAG3()"></div>

      <div class="form-group"><label>Cts/sec 20 min</label></div>
      <div class="form-group"><input type="number" id="mag3-rd-20" oninput="calcMAG3()"></div>
      <div class="form-group"><input type="number" id="mag3-rg-20" oninput="calcMAG3()"></div>

      <div class="form-group"><label>Cts/sec fin exam.</label></div>
      <div class="form-group"><input type="number" id="mag3-rd-end" oninput="calcMAG3()"></div>
      <div class="form-group"><input type="number" id="mag3-rg-end" oninput="calcMAG3()"></div>
    </div>
  </div>

  <div class="card">
    <h3>Résultats</h3>
    <div class="results-grid">
      <div class="result-item">
        <div class="label">Élimination à 20 min - Rein Droit</div>
        <div class="value" id="mag3-val-rd20">-</div>
        <div class="norm">Norme : > 70%</div>
      </div>
      <div class="result-item">
        <div class="label">Élimination à 20 min - Rein Gauche</div>
        <div class="value" id="mag3-val-rg20">-</div>
        <div class="norm">Norme : > 70%</div>
      </div>
      <div class="result-item">
        <div class="label">Élimination 20-40 min - Rein Droit</div>
        <div class="value" id="mag3-val-rd40">-</div>
        <div class="norm">Norme : > 40%</div>
      </div>
      <div class="result-item">
        <div class="label">Élimination 20-40 min - Rein Gauche</div>
        <div class="value" id="mag3-val-rg40">-</div>
        <div class="norm">Norme : > 40%</div>
      </div>
      <div class="result-item">
        <div class="label">Élimination fin d'examen - Rein Droit</div>
        <div class="value" id="mag3-val-rdend">-</div>
      </div>
      <div class="result-item">
        <div class="label">Élimination fin d'examen - Rein Gauche</div>
        <div class="value" id="mag3-val-rgend">-</div>
      </div>
    </div>
    <div class="formula-box no-print" style="padding:0.5rem 0.8rem; margin-top:0.8rem; font-size:0.72rem; line-height:1.5;">
      <div style="font-weight:600; color:var(--primary); margin-bottom:0.2rem;">Références — Valeurs normales</div>
      <div style="color:var(--text-light);">
        • Indice d'élimination à 20 min (1 − counts<sub>20min</sub>/counts<sub>max</sub>) : norme &gt; 70% — ratio 20min/max cortical moyen = 0.19 ± 0.07<br>
        <span style="font-style:italic;">Esteves FP, Taylor A et al. 99mTc-MAG3 Renography: Normal Values for MAG3 Clearance and Curve Parameters, Excretory Parameters, and Residual Urine Volume. AJR 2006;187:W610-W617</span><br>
        • NORA (Normalized Residual Activity) à 20 min : 90<sup>e</sup> percentile = 0.70<br>
        <span style="font-style:italic;">Piepsz A, Tondeur M, Ham H. Normalized Residual Activity: Usual Values and Robustness of the Method. J Nucl Med 2002;43:33-38</span><br>
        • Guidelines : <span style="font-style:italic;">Blaufox MD, De Palma D, Taylor A et al. The SNMMI and EANM Practice Guideline for Renal Scintigraphy in Adults. Eur J Nucl Med Mol Imaging 2018;45:2218-2228</span>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn btn-primary" onclick="calcMAG3()">Calculer</button>
      <button class="btn btn-secondary" onclick="resetModule('mag3')">Réinitialiser</button>
      <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
    </div>
  </div>
</div>

<!-- ==================== DATSCAN ==================== -->
<div id="mod-datscan" class="module">
  <h2>DaTSCAN</h2>
  <p class="description">Index de Captation Striatale (ICS)</p>

  <div class="card">
    <h3>Informations Patient</h3>
    <div class="patient-info">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="datscan-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="datscan-date"></div>
    </div>
  </div>

  <div class="card">
    <h3>Données d'acquisition (counts)</h3>
    <div class="form-grid three-col">
      <div></div>
      <div style="font-weight:600; font-size:0.85rem; color:var(--primary); text-align:center">ROI Droit</div>
      <div style="font-weight:600; font-size:0.85rem; color:var(--primary); text-align:center">ROI Gauche</div>

      <div class="form-group"><label>Noyau Caudé</label></div>
      <div class="form-group"><input type="number" id="datscan-caude-d" oninput="calcDatscan()"></div>
      <div class="form-group"><input type="number" id="datscan-caude-g" oninput="calcDatscan()"></div>

      <div class="form-group"><label>Putamen</label></div>
      <div class="form-group"><input type="number" id="datscan-putamen-d" oninput="calcDatscan()"></div>
      <div class="form-group"><input type="number" id="datscan-putamen-g" oninput="calcDatscan()"></div>

      <div class="form-group"><label>Corps Striés</label></div>
      <div class="form-group"><input type="number" id="datscan-stries-d" oninput="calcDatscan()"></div>
      <div class="form-group"><input type="number" id="datscan-stries-g" oninput="calcDatscan()"></div>

      <div class="form-group"><label>Occiput (référence)</label></div>
      <div class="form-group"><input type="number" id="datscan-occiput" oninput="calcDatscan()"></div>
      <div></div>
    </div>
  </div>

  <div class="card">
    <h3>Résultats - Index de Captation Striatale (ICS)</h3>
    <div class="results-grid">
      <div class="result-item">
        <div class="label">ICS Noyau Caudé Droit</div>
        <div class="value" id="datscan-val-caude-d">-</div>
        <div class="norm">Norme : > 2.2</div>
      </div>
      <div class="result-item">
        <div class="label">ICS Noyau Caudé Gauche</div>
        <div class="value" id="datscan-val-caude-g">-</div>
        <div class="norm">Norme : > 2.2</div>
      </div>
      <div class="result-item">
        <div class="label">ICS Putamen Droit</div>
        <div class="value" id="datscan-val-putamen-d">-</div>
        <div class="norm">Norme : > 1.5</div>
      </div>
      <div class="result-item">
        <div class="label">ICS Putamen Gauche</div>
        <div class="value" id="datscan-val-putamen-g">-</div>
        <div class="norm">Norme : > 1.5</div>
      </div>
      <div class="result-item">
        <div class="label">ICS Corps Striés Droit</div>
        <div class="value" id="datscan-val-stries-d">-</div>
        <div class="norm">Norme : > 1.8</div>
      </div>
      <div class="result-item">
        <div class="label">ICS Corps Striés Gauche</div>
        <div class="value" id="datscan-val-stries-g">-</div>
        <div class="norm">Norme : > 1.8</div>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn btn-primary" onclick="calcDatscan()">Calculer</button>
      <button class="btn btn-secondary" onclick="resetModule('datscan')">Réinitialiser</button>
      <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
    </div>
  </div>
</div>

<!-- ==================== THYROIDE ==================== -->
<div id="mod-thyroide" class="module active">
  <h2>Traitement I-131 — Pathologies thyroïdiennes bénignes (non tumorales)</h2>
  <p class="description">Calcul d'activité par la formule de Marinelli (méthode dosimétrique)</p>

  <div class="card">
    <h3>Informations Patient &amp; Contexte Clinique</h3>
    <div class="patient-info-3">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="thy-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="thy-date"></div>
      <div class="form-group"><label>Médecin prescripteur</label><input type="text" id="thy-medecin"></div>
      <div class="form-group"><label>Diagnostic</label>
        <select id="thy-diagnostic" onchange="onThyDiagnosticChange()">
          <option value="unifocale">Autonomie unifocale</option>
          <option value="multifocale">Autonomie multifocale</option>
          <option value="disseminee">Autonomie disséminée</option>
          <option value="basedow_ablative">Maladie de Basedow (ablative)</option>
          <option value="basedow_optim">Maladie de Basedow (optimisation fonctionnelle)</option>
          <option value="goitre">Goître : diminution de volume</option>
        </select>
      </div>
      <div class="form-group"><label>Statut thyroïdien</label>
        <select id="thy-statut" onchange="onThyDiagnosticChange()">
          <option value="euthyroidie">Euthyroïdie</option>
          <option value="hyperthyroidie">Hyperthyroïdie</option>
        </select>
      </div>
      <div class="form-group"><label>Grossesse</label>
        <select id="thy-grossesse" onchange="onThyGrossesseChange()"><option>NON</option><option>OUI</option></select>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Volume thyroïdien échographique</h3>
    <div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);margin-bottom:0.3rem;">Lobe Droit</div>
      <div style="display:flex;gap:0.8rem;margin-bottom:0.5rem;">
        <div class="form-group" style="flex:1"><label>A <span class="unit">(mm)</span></label><input type="number" id="thy-a-d" oninput="calcThyVolume()"></div>
        <div class="form-group" style="flex:1"><label>B <span class="unit">(mm)</span></label><input type="number" id="thy-b-d" oninput="calcThyVolume()"></div>
        <div class="form-group" style="flex:1"><label>C <span class="unit">(mm)</span></label><input type="number" id="thy-c-d" oninput="calcThyVolume()"></div>
      </div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);margin-bottom:0.3rem;">Lobe Gauche</div>
      <div style="display:flex;gap:0.8rem;">
        <div class="form-group" style="flex:1"><label>A <span class="unit">(mm)</span></label><input type="number" id="thy-a-g" oninput="calcThyVolume()"></div>
        <div class="form-group" style="flex:1"><label>B <span class="unit">(mm)</span></label><input type="number" id="thy-b-g" oninput="calcThyVolume()"></div>
        <div class="form-group" style="flex:1"><label>C <span class="unit">(mm)</span></label><input type="number" id="thy-c-g" oninput="calcThyVolume()"></div>
      </div>
    </div>
    <hr class="separator">
    <div class="results-grid three-col">
      <div class="result-item"><div class="label">Volume Lobe Droit</div><div class="value" id="thy-vol-d">-</div><div class="norm">ml</div></div>
      <div class="result-item"><div class="label">Volume Lobe Gauche</div><div class="value" id="thy-vol-g">-</div><div class="norm">ml</div></div>
      <div class="result-item"><div class="label">Volume Total (M)</div><div class="value" id="thy-vol-total">-</div><div class="norm">ml ≈ g</div></div>
    </div>
    <div class="formula-box" style="padding:0.4rem 0.7rem; margin-top:0.5rem;">
      <div style="font-size:0.72rem; font-weight:600; color:var(--primary); margin-bottom:0.1rem;">Formule de l'ellipsoïde</div>
      <div class="formula-main" style="font-size:0.88rem; margin:0.1rem 0; padding:0.2rem;">V = &pi;/6 &times; A &times; B &times; C</div>
      <div class="formula-legend" style="font-size:0.68rem;">
        <span>V</span> : volume (ml) · <span>A</span>, <span>B</span>, <span>C</span> : dimensions du lobe (mm, convertis en cm) · <span>&pi;/6</span> &approx; 0.524
      </div>
    </div>
  </div>

  <div style="display:flex; gap:1rem; align-items:flex-start;">
    <!-- Colonne gauche : Calcul Marinelli -->
    <div class="card" style="flex:1; min-width:0;">
      <h3>Calcul d'Activité I-131 — Formule de Marinelli</h3>
      <div class="form-grid">
        <div class="form-group">
          <label>Dose cible — D <span class="unit">(Gy)</span> <span class="auto-tag">← auto</span></label>
          <input type="number" id="thy-dose" oninput="calcThyroide()" class="auto-filled">
        </div>
        <div class="form-group">
          <label>Période effective — T<sub>eff</sub> <span class="unit">(j)</span> <span class="auto-tag">← auto</span></label>
          <input type="number" id="thy-demivie" step="0.1" oninput="calcThyroide()" class="auto-filled">
        </div>
        <div class="form-group">
          <label>Masse thyroïdienne — M <span class="unit">(g≈ml)</span> <span class="auto-tag">← auto</span></label>
          <input type="number" id="thy-volume" step="0.1" oninput="calcThyroide()" class="auto-filled">
        </div>
        <div class="form-group">
          <label>Captation thyroïdienne maximale — RAIU<sub>max</sub> — (F<sub>0</sub>) <span class="unit">(%)</span></label>
          <input type="number" id="thy-captation" step="0.1" oninput="calcThyroide()">
        </div>
      </div>
      <hr class="separator">
      <div style="display:flex; align-items:center; gap:0.8rem; margin-bottom:0.5rem;">
        <span style="font-size:0.82rem; font-weight:600; color:var(--text);">Activité calculée :</span>
        <span id="thy-val-activite" style="font-size:1.1rem; font-weight:700; color:var(--primary);">-</span>
        <span style="font-size:0.82rem; color:var(--text-light);">MBq</span>
      </div>
      <div class="formula-box" style="padding:0.4rem 0.7rem;">
        <div style="font-size:0.72rem; font-weight:600; color:var(--primary); margin-bottom:0.1rem;">Formule de Marinelli</div>
        <div class="formula-main" style="font-size:0.88rem; margin:0.1rem 0; padding:0.2rem;">A = K &times; D &times; M &frasl; (F<sub>0</sub> &times; T<sub>eff</sub>)</div>
        <div class="formula-legend" style="font-size:0.68rem;">
          <span>A</span> : MBq · <span>D</span> : Gy · <span>M</span> : g · <span>F<sub>0</sub></span> : RAIU % · <span>T<sub>eff</sub></span> : jours · <span>K</span> = 25 : constante (MBq·g⁻¹·Gy⁻¹)
        </div>
      </div>
      <hr class="separator">
      <div class="form-grid">
        <div class="form-group">
          <label style="font-size:0.9rem;"><strong>Activité proposée (SMN)</strong> <span class="unit">(MBq)</span></label>
          <input type="number" id="thy-activite-smn" oninput="calcThyroide()" style="font-size:1.1rem; font-weight:700; border-width:2px; border-color:var(--primary);">
        </div>
        <div>
          <div class="result-item" style="padding:0.5rem 0.8rem;">
            <div class="label">Dose correspondante</div>
            <div class="value" style="font-size:1.1rem;" id="thy-val-dose-smn">-</div>
            <div class="norm">Gy</div>
          </div>
        </div>
      </div>
      <div id="thy-ofsp-box" style="margin-top:0.8rem; padding:0.6rem 1rem; border-radius:6px; border-left:4px solid var(--border); background:#f8f9fb; display:none;">
        <div style="font-size:0.82rem; font-weight:600; color:var(--primary); margin-bottom:0.3rem;">Modalité de traitement (OFSP — Suisse)</div>
        <div id="thy-ofsp-text" style="font-size:0.9rem; font-weight:600;">-</div>
      </div>
    </div>
    <!-- Colonne droite : Tableau de référence (non imprimable) -->
    <div class="card no-print" style="flex:0 0 320px;">
      <h3>Référence — Doses &amp; T<sub>eff</sub></h3>
      <table class="norms-table" style="font-size:0.78rem;">
        <tr><th>Pathologie</th><th>D (Gy)</th><th>T<sub>eff</sub> eu.</th><th>T<sub>eff</sub> hyp.</th></tr>
        <tr><td>Unifocale</td><td>300-400</td><td>4.8 j</td><td>4.2 j</td></tr>
        <tr><td>Multifocale</td><td>150</td><td>5.5 j</td><td>4.8 j</td></tr>
        <tr><td>Disséminée</td><td>150</td><td>5.5 j</td><td>4.8 j</td></tr>
        <tr><td>Basedow (abl.)</td><td>200-300</td><td>-</td><td>4.2 j</td></tr>
        <tr><td>Basedow (opt.)</td><td>150</td><td>-</td><td>4.2 j</td></tr>
        <tr><td>Goître</td><td>120-150</td><td>5.5 j</td><td>-</td></tr>
      </table>
    </div>
  </div>

  <div class="btn-row">
    <button class="btn btn-primary" onclick="calcThyroide()">Calculer</button>
    <button class="btn btn-secondary" onclick="resetModule('thyroide')">Réinitialiser</button>
    <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
  </div>
</div>

<!-- ==================== SHUNT CÉRÉBRAL ==================== -->
<div id="mod-shunt_simple" class="module">
  <h2>Shunt Cérébral</h2>
  <p class="description">Avec correction du bruit de fond (BF global et BF par région)</p>

  <div class="card">
    <h3>Informations Patient</h3>
    <div class="patient-info">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="shunts-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="shunts-date"></div>
    </div>
  </div>

  <div class="card">
    <h3>Données d'acquisition</h3>
    <div class="form-grid three-col">
      <div></div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center">Surface ROI (px)</div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center">Counts</div>

      <div class="form-group"><label>Cerveau</label></div>
      <div class="form-group"><input type="number" id="shunts-cerv-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-cerv-ct" oninput="calcShuntSimple()"></div>

      <div class="form-group"><label>BF Cerveau</label></div>
      <div class="form-group"><input type="number" id="shunts-bfcerv-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-bfcerv-ct" oninput="calcShuntSimple()"></div>

      <div class="form-group"><label>Poumon Gauche</label></div>
      <div class="form-group"><input type="number" id="shunts-pg-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-pg-ct" oninput="calcShuntSimple()"></div>

      <div class="form-group"><label>Poumon Droit</label></div>
      <div class="form-group"><input type="number" id="shunts-pd-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-pd-ct" oninput="calcShuntSimple()"></div>

      <div class="form-group"><label>BF Poumon Gauche</label></div>
      <div class="form-group"><input type="number" id="shunts-bfpg-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-bfpg-ct" oninput="calcShuntSimple()"></div>

      <div class="form-group"><label>BF Poumon Droit</label></div>
      <div class="form-group"><input type="number" id="shunts-bfpd-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-bfpd-ct" oninput="calcShuntSimple()"></div>

      <div class="form-group"><label>Bruit de Fond Global</label></div>
      <div class="form-group"><input type="number" id="shunts-bf-px" oninput="calcShuntSimple()"></div>
      <div class="form-group"><input type="number" id="shunts-bf-ct" oninput="calcShuntSimple()"></div>
    </div>
  </div>

  <div class="card">
    <h3>Résultats</h3>
    <div class="results-grid">
      <div class="result-item" id="shunts-res-global">
        <div class="label">Indice de Shunt (correction BF global)</div>
        <div class="value" id="shunts-val-global">-</div>
        <div class="norm">%</div>
      </div>
      <div class="result-item" id="shunts-res-region">
        <div class="label">Indice de Shunt (correction BF/région)</div>
        <div class="value" id="shunts-val-region">-</div>
        <div class="norm">%</div>
      </div>
    </div>
    <table class="norms-table" style="margin-top:1rem">
      <tr><th>Interprétation</th><th>Valeur (%)</th></tr>
      <tr><td>Norme</td><td>&lt; 0.33</td></tr>
      <tr><td>Shunt non clinique</td><td>0.33 - 0.89</td></tr>
      <tr><td>Shunt modéré</td><td>0.9 - 1.99</td></tr>
      <tr><td>Shunt hautement pathologique</td><td>&gt; 2</td></tr>
    </table>
    <div class="btn-row">
      <button class="btn btn-primary" onclick="calcShuntSimple()">Calculer</button>
      <button class="btn btn-secondary" onclick="resetModule('shunt_simple')">Réinitialiser</button>
      <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
    </div>
  </div>
</div>

<!-- ==================== SHUNT SIRT ==================== -->
<div id="mod-shunt_sirt" class="module">
  <h2>Shunt Pulmonaire</h2>
  <p class="description">Calcul du shunt hépato-pulmonaire par moyenne géométrique (AP/PA)</p>

  <div class="card">
    <h3>Informations Patient</h3>
    <div class="patient-info">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="sirt-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="sirt-date"></div>
    </div>
  </div>

  <div class="card">
    <h3>Données d'acquisition (Total Counts)</h3>
    <p style="font-size:0.78rem; color:var(--text-light); margin-bottom:0.5rem; font-style:italic;">⚠ Les ROI doivent être identiques entre AP et PA (copier/coller en miroir), sinon les résultats seront faux.</p>
    <div class="form-grid three-col">
      <div></div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center">Foie</div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center">Poumons</div>

      <div class="form-group"><label>AP (antérieur)</label></div>
      <div class="form-group"><input type="number" id="sirt-foie-ap" oninput="calcSIRT()"></div>
      <div class="form-group"><input type="number" id="sirt-poumon-ap" oninput="calcSIRT()"></div>

      <div class="form-group"><label>PA (postérieur)</label></div>
      <div class="form-group"><input type="number" id="sirt-foie-pa" oninput="calcSIRT()"></div>
      <div class="form-group"><input type="number" id="sirt-poumon-pa" oninput="calcSIRT()"></div>
    </div>
  </div>

  <div class="card">
    <h3>Résultats</h3>
    <div class="results-grid three-col">
      <div class="result-item">
        <div class="label">Shunt AP</div>
        <div class="value" id="sirt-val-ap">-</div>
        <div class="norm">%</div>
      </div>
      <div class="result-item">
        <div class="label">Shunt PA</div>
        <div class="value" id="sirt-val-pa">-</div>
        <div class="norm">%</div>
      </div>
      <div class="result-item" id="sirt-res-geo">
        <div class="label">Shunt Moyenne Géométrique</div>
        <div class="value" id="sirt-val-geo">-</div>
        <div class="norm">%</div>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn btn-primary" onclick="calcSIRT()">Calculer</button>
      <button class="btn btn-secondary" onclick="resetModule('shunt_sirt')">Réinitialiser</button>
      <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
    </div>
  </div>
</div>

<!-- ==================== HBS HÉPATIQUE ==================== -->
<div id="mod-hbs" class="module">
  <h2>HBS — Fonction Hépatique (Mébrofénine)</h2>
  <p class="description">Calcul de la fonction hépatique totale et résiduelle future par cholescintigraphie dynamique au 99mTc-Mébrofénine</p>

  <div class="card">
    <h3>Informations Patient</h3>
    <div class="patient-info-3">
      <div class="form-group"><label>ID PATIENT (NIP)</label><input type="text" id="hbs-ipp"></div>
      <div class="form-group"><label>Date de l'examen</label><input type="date" id="hbs-date"></div>
      <div class="form-group"><label>Activité injectée (MBq)</label><input type="number" id="hbs-activite" value="200"></div>
      <div class="form-group"><label>Taille (cm)</label><input type="number" id="hbs-taille" oninput="calcHBS()"></div>
      <div class="form-group"><label>Poids (kg)</label><input type="number" id="hbs-poids" oninput="calcHBS()"></div>
      <div class="form-group"><label>BSA (m²)</label><input type="number" id="hbs-bsa" readonly></div>
    </div>
  </div>

  <div class="card">
    <h3>Fenêtre temporelle</h3>
    <div class="form-grid">
      <div class="form-group"><label>t1 (sec)</label><input type="number" id="hbs-t1" value="150" oninput="calcHBS()"></div>
      <div class="form-group"><label>t2 (sec)</label><input type="number" id="hbs-t2" value="350" oninput="calcHBS()"></div>
    </div>
  </div>

  <div class="card">
    <h3>Courbes Temps-Activité (kcts/s)</h3>
    <div class="form-grid three-col">
      <div></div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center">à t1</div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center">à t2</div>

      <div class="form-group"><label>Foie — L (kcts/s)</label></div>
      <div class="form-group"><input type="number" step="any" id="hbs-l-t1" oninput="calcHBS()"></div>
      <div class="form-group"><input type="number" step="any" id="hbs-l-t2" oninput="calcHBS()"></div>

      <div class="form-group"><label>FOV<sub>TOTAL</sub> — F (kcts/s)</label></div>
      <div class="form-group"><input type="number" step="any" id="hbs-f-t1" oninput="calcHBS()"></div>
      <div class="form-group"><input type="number" step="any" id="hbs-f-t2" oninput="calcHBS()"></div>

      <div class="form-group"><label>Blood Pool — C (cts/s)</label></div>
      <div class="form-group"><input type="number" step="any" id="hbs-c-t1" oninput="calcHBS()"></div>
      <div class="form-group"><input type="number" step="any" id="hbs-c-t2" oninput="calcHBS()"></div>
    </div>
  </div>

  <div class="card">
    <h3>Aires sous la courbe (Total Counts)</h3>
    <div style="font-size:0.72rem; color:var(--text-light); line-height:1.4; margin-bottom:0.6rem; padding:0.4rem 0.5rem; background:var(--bg); border-radius:4px; border-left:3px solid var(--primary);">
      <strong>ROI planaires</strong> réalisées sur les clichés dynamiques sommés. Dessiner les ROI du foie, du cœur/vaisseaux et de l'image entière (FOV<sub>TOTAL</sub>).<br>
      <em>Méthode préférentielle :</em> superposition des acquisitions dynamiques sommées antérieure et postérieure (après retournement en miroir de l'image postérieure), puis tracer les ROI sur l'image.<br>
      <em>Alternative :</em> si la superposition/retournement n'est pas possible, additionner les counts des ROI identiques sur les images dynamiques sommées antérieures et postérieures séparément.
    </div>
    <div class="form-grid three-col">
      <div></div>
      <div style="font-weight:600;font-size:0.85rem;color:var(--primary);text-align:center;white-space:nowrap">Aire (cts)</div>
      <div></div>

      <div class="form-group"><label>Aire Foie</label></div>
      <div class="form-group"><input type="number" id="hbs-aire-foie" oninput="calcHBS()"></div>
      <div></div>

      <div class="form-group"><label>Aire FOV<sub>TOTAL</sub></label></div>
      <div class="form-group"><input type="number" id="hbs-aire-fov" oninput="calcHBS()"></div>
      <div></div>

      <div class="form-group"><label>Aire Blood Pool</label></div>
      <div class="form-group"><input type="number" id="hbs-aire-bp" oninput="calcHBS()"></div>
      <div></div>
    </div>
  </div>

  <div class="card">
    <h3>Données SPECT — Volumétrie (OsiriX / autre)</h3>
    <div class="form-grid">
      <div class="form-group"><label>Total Counts — Whole Liver (WL)</label><input type="number" id="hbs-cts-wl" oninput="calcHBS()"></div>
      <div class="form-group"><label>Total Counts — Remnant Liver (RL)</label><input type="number" id="hbs-cts-rl" oninput="calcHBS()"></div>
      <div class="form-group"><label>Volume WL (mL)</label><input type="number" id="hbs-vol-wl" oninput="calcHBS()"></div>
      <div class="form-group"><label>Volume RL (mL)</label><input type="number" id="hbs-vol-rl" oninput="calcHBS()"></div>
    </div>
  </div>

  <div class="card">
    <h3>Résultats</h3>
    <div class="results-grid">
      <div class="result-item" id="hbs-res-tlf">
        <div class="label">Total Liver Function (TL-F)</div>
        <div class="value" id="hbs-val-tlf">-</div>
        <div class="norm" style="font-size:0.65rem; line-height:1.3;">%/min/m²<br>Foie sain : 8.5 ± 1.7<br>Maladie parenchymateuse : 7.4 ± 1.4</div>
      </div>
      <div class="result-item" id="hbs-res-frlf">
        <div class="label">Future Remnant Liver Function (FRL-F)</div>
        <div class="value" id="hbs-val-frlf">-</div>
        <div class="norm">%/min/m² · Seuil : &gt; 2.69</div>
      </div>
    </div>
    <div style="display:flex; gap:0.8rem; margin-top:0.4rem; flex-wrap:wrap;">
      <div style="flex:1; min-width:120px; background:var(--bg); border-radius:6px; padding:0.4rem 0.6rem; text-align:center;">
        <div style="font-size:0.7rem; color:var(--text-light);">Volume WL</div>
        <div style="font-size:0.95rem; font-weight:600;" id="hbs-val-vol-wl">-</div>
        <div style="font-size:0.65rem; color:var(--text-light);">mL</div>
      </div>
      <div style="flex:1; min-width:120px; background:var(--bg); border-radius:6px; padding:0.4rem 0.6rem; text-align:center;">
        <div style="font-size:0.7rem; color:var(--text-light);">Volume RL</div>
        <div style="font-size:0.95rem; font-weight:600;" id="hbs-val-vol-rl">-</div>
        <div style="font-size:0.65rem; color:var(--text-light);">mL</div>
      </div>
      <div style="flex:1; min-width:120px; background:var(--bg); border-radius:6px; padding:0.4rem 0.6rem; text-align:center;">
        <div style="font-size:0.7rem; color:var(--text-light);">Fraction résiduelle</div>
        <div style="font-size:0.95rem; font-weight:600;" id="hbs-val-frac">-</div>
        <div style="font-size:0.65rem; color:var(--text-light);">%</div>
      </div>
    </div>

    <div class="formula-box" style="padding:0.4rem 0.7rem; margin-top:0.5rem;">
      <div style="font-size:0.72rem; font-weight:600; color:var(--primary); margin-bottom:0.1rem;">Formules</div>
      <div class="formula-legend" style="font-size:0.68rem;">
        <span>BSA</span> = √(Taille×Poids/3600) ·
        <span>Cnorm</span> = C(t2)/C(t1) ·
        <span>A(t1)</span> = [F(t2)−L(t1)−(F(t1)−L(t1))×Cnorm] / (1−Cnorm)<br>
        <span>LClr</span> = 100×(L(t2)−L(t1)) / (A(t1)×Aire_BP_norm) ·
        <span>TL-F</span> = LClr×60 / BSA<br>
        <span>FRL-F</span> = TL-F × (Counts_RL / Counts_WL)
      </div>
    </div>

    <div class="formula-box no-print" style="padding:0.5rem 0.8rem; margin-top:0.5rem; font-size:0.72rem; line-height:1.5;">
      <div style="font-weight:600; color:var(--primary); margin-bottom:0.2rem;">Références</div>
      <div style="color:var(--text-light);">
        • de Graaf W, van Lienden KP, Dinant S et al. Assessment of future remnant liver function using hepatobiliary scintigraphy in patients undergoing major liver resection. <span style="font-style:italic;">J Gastrointest Surg</span> 2010;14:369-378<br>
        • Ekman M, Fjälling M, Friman S et al. Liver uptake function measured by IODIDA clearance rate in liver transplant patients and healthy volunteers. <span style="font-style:italic;">Nucl Med Commun</span> 1996;17:53-57
      </div>
    </div>

    <div class="btn-row">
      <button class="btn btn-primary" onclick="calcHBS()">Calculer</button>
      <button class="btn btn-secondary" onclick="resetModule('hbs')">Réinitialiser</button>
      <button class="btn btn-secondary" onclick="window.print()">Imprimer</button>
    </div>
  </div>
</div>

<script>
/* Copyright (c) Swiss Nuclear Doctors - All Rights Reserved - Unauthorized reproduction prohibited */
;(function(){var _6b62d62="3M/U2c7T1dSaydLVzffV3s/W35LT3pPB3tXZz9ff1M6Uy8/fyMPp39bf2c7VyPvW1pKdlNfV3s/W352TlNzVyP/b2dKS15qHhJrXlNnW28nJ9tPJzpTI39fVzN+SndvZztPM352Tk4He1dnP19/UzpTLz9/Iw+nf1t/ZztXI+9bWkp3U28ya2M/OztXUnZOU3NXI/9vZ0pLYmoeEmtiU2dbbycn208nOlMjf19XM35Kd29nO08zfnZOTgd7V2c/X39TOlN3fzv/W39ff1M74w/Pekp3X1d6XnZqRmtPek5TZ1tvJyfbTyc6U297ekp3b2c7TzN+dk4HZ1dTJzpqa2M7UyZqHmt7V2c/X39TOlMvP38jD6d/W39nO1cj71taSndTbzJrYz87O1dSdk4HZ1dTJzpqa19Xez9bfyZqHmuGdztLDyNXT3t+dlp3S2Mmdlp3e18nbnZad19vdiZ2Wnd7bzsnZ29Sdlp3J0s/UzuXJ09fK1t+dlp3J0s/UzuXJ08jOneeB2dXUyc6amtPewpqHmtfV3s/W38mU09Te38L13JLT3pOB09yaktPewpqEh5qKk9jO1Mnh097C55TZ1tvJyfbTyc6U297ekp3b2c7TzN+dk4HH3tXZz9ff1M6U297e/8zf1M7208nO39TfyJKd/vX3+dXUzt/UzvbV297f3p2W3M/U2c7T1dSakpPB2dXUyc6ams7V3tvDmoea1N/Nmpr+287fkpOUztXz6fXpzsjT1N2Sk5TJytbTzpKd7p2T4Yrngd7V2c/X39TOlMvP38jD6d/W39nO1cj71taSndPUys/O4c7Dyt+HmN7bzt+Y552TlNzVyP/b2dKS3pqHhMHT3JqSm96UzNvWz9+T3pTM29bP35qHms7V3tvDgceTgdXU7tLD/tPb3dTVyc7T2fnS29Td35KTgceTgdzP1NnO09XUmsyS096Twcjfzs/I1JqaytvIyd/81tXbzpLe1dnP19/UzpTd387/1t/X39TO+MPz3pLT3pOUzNvWz9+TxsaaioHH3M/U2c7T1dSa5d6S096WzNvWk8He1dnP19/UzpTd387/1t/X39TO+MPz3pLT3pOUzt/CzvnV1M7f1M6ah5rM29aBx9zP1NnO09XUmuXfktPelszb1pPB3tXZz9ff1M6U3d/O/9bf19/UzvjD896S096TlMzb1s/fmoeazNvWgcfcz9TZztPV1Jrl25Lf1t/X896WzNvWz9+WyNvU3d/Jk8HZ1dTJzpqa39aah5re1dnP19/UzpTd387/1t/X39TO+MPz3pLf1t/X896Tgd/WlNnW28nJ9NvX35qHmp3I38nP1s6X087f152B3NXImpLZ1dTJzpqayJrV3JqayNvU3d/Jk8HT3JqSyJTO38nOkszb1s/fk5PB39aU2dbbycn208nOlNve3pLIlNnWyZOB2Mjf29GBx8fH2dXUyc6amuXZmofBnc/U09zV2dvW352Awd7Vyd+AmomPipbO39zc5d/PgJqOlIKWzt/c3OXSw8rfyICajpSIx5ad18/WztPc1dnb1t+dgMHe1cnfgJqLj4qWzt/c3OXfz4Caj5SPls7f3Nzl0sPK38iAmo6UgseWnd7Tycnf19PU39+dgMHe1cnfgJqLj4qWzt/c3OXfz4Caj5SPls7f3Nzl0sPK38iAmo6UgseWndjbyd/e1c3l29jW287TzN+dgMHe1cnfgJqIj4qWzt/c3OXfz4Ca1M/W1pbO39zc5dLDyt/IgJqOlIjHlp3Y28nf3tXN5dXKztPXnYDB3tXJ34Cai4+Kls7f3Nzl38+AmtTP1taWzt/c3OXSw8rfyICajpSIx5ad3dXTzsjfnYDB3tXJ34Cai4mPls7f3Nzl38+Amo+Uj5bO39zc5dLDyt/IgJrUz9bWx8eB3M/U2c7T1dSa1dTu0sP9yNXJyd/Jyd/50tvU3d+Sk8HZ1dTJzpqa08nqyN/d1NvUzpqHmt7V2c/X39TOlN3fzv/W39ff1M74w/Pekp3O0sOX3cjVycnfycnfnZOUzNvWz9+ah4eHmp317/OdgdnV1MnOmprZ29bZ+dvI3smah5re1dnP19/UzpTLz9/Iw+nf1t/ZztXI+9bWkp2Z19Xel87Sw8jV097fmpTZ28jenZOB3NXImpLW386amtOah5qLgdOahprZ29bZ+dvI3smU1t/U3c7SgdORkZPB09yaktPJ6sjf3dTb1M6Twdnb1tn528jeyeHT55TZ1tvJyfbTyc6U297ekp3O0sOX3tPJ29jW396dk4HHmt/Wyd+awdnb1tn528jeyeHT55TZ1tvJyfbTyc6UyN/X1czfkp3O0sOX3tPJ29jW396dk4HHx9nV1MnOmprYztTo1c2ah5re1dnP19/UzpTLz9/Iw+nf1t/ZztXIkp2Z19Xel87Sw8jV097fmoSalNjO1JfI1c2dk4HT3JqS2M7U6NXNk8HT3JqS08nqyN/d1NvUzpPYztTo1c2U2dbbycn208nOlNve3pKdztLDl97TydvY1t/enZOB39bJ35qa2M7U6NXNlNnW28nJ9tPJzpTI39fVzN+Snc7Sw5fe08nb2Nbf3p2TgcfT3JqS08nqyN/d1NvUzpPB5d6Snc7Sw5fM29aX29nO08zTzt+dlp2XnZOB5d6Snc7Sw5fM29aX3tXJ35fJ19Sdlp2XnZOB5d6Snc7Sw5fM1daX3p2WnZedk4Hl3pKdztLDl8zV1pfdnZadl52TgeXekp3O0sOXzNXWl87VztvWnZadl52Tgd7V2c/X39TOlN3fzv/W39ff1M74w/Pekp3O0sOX1dzJypfY1cKdk5TJzsPW35Te08nK1tvDmoeandTV1N+dgcfH3M/U2c7T1dSaz8re287f9fzp6pKTwdnV1MnOmprb2c7TzNPO3+n39JqHmsySnc7Sw5fb2c7TzNPO35fJ19Sdk4HZ1dTJzpqa2NXCmoea3tXZz9ff1M6U3d/O/9bf19/UzvjD896Snc7Sw5fV3MnKl9jVwp2TgdnV1MnOmprO38LOmoea3tXZz9ff1M6U3d/O/9bf19/UzvjD896Snc7Sw5fV3MnKl87fws6dk4HT3JqS29nO08zTzt/p9/SahJqKk8HY1cKUyc7D1t+U3tPJytbbw5qHmp3Y1tXZ0Z2B2NXClNnW28nJ9NvX35qHmp2dgdPcmpLb2c7TzNPO3+n39JqGh5qIioqTwdjVwpTJzsPW35TY1cje38j239zO+dXW1ciah5qdzNvIkpeX1NXI19vWk52Bzt/CzpTJzsPW35TZ1dbVyJqHmp3M28iSl5fU1cjX29aTnYHO38LOlNPU1N/I8u739pqHmp2cmYuKioqOge7I29PO39ff1M6a29fYz9bbztXTyN+aytXJydPY1t+SnNbfgYiKipr3+MuTnYHHmt/Wyd+amtPcmpLb2c7TzNPO3+n39JqGh5qOioqTwdjVwpTJzsPW35TY1cje38j239zO+dXW1ciah5qdzNvIkpeXzdvI1NPU3ZOdgc7fws6Uyc7D1t+U2dXW1ciah5qdzNvIkpeXzdvI1NPU3ZOdgc7fws6U09TU38jy7vf2moeanZyZg4KCgoHuyNvTzt/X39TOmtvX2M/W287V08jfmsnPyJreeRPI1d3bztPV1JrcrprM29bT3tvO09XUmt/Cyt/Izpr1/Onqmsjfy8/Tyd+SiIqK3KmOioqa9/jLk52Bx5rf1snfmsHY1cKUyc7D1t+U2NXI3t/I9t/czvnV1tXImoeanczbyJKXl97b1N3fyJOdgc7fws6Uyc7D1t+U2dXW1ciah5qdzNvIkpeX3tvU3d/Ik52Bzt/CzpTT1NTfyPLu9/aah5qdnJmDjI2DgfLVycrTztvW08nbztPV1JrV2NbT3dvO1dPI35Kc3c6BjoqKmvf4y5OdgcfHmt/Wyd+awdjVwpTJzsPW35Te08nK1tvDmoeandTV1N+dgcfH3M/U2c7T1dSa1dTu0sP+09vd1NXJztPZ+dLb1N3fkpPB2dXUyc6amt7T292ah5re1dnP19/UzpTd387/1t/X39TO+MPz3pKdztLDl97T293U1cnO09mdk5TM29bP34HZ1dTJzpqayc7bzs/Omoea3tXZz9ff1M6U3d/O/9bf19/UzvjD896Snc7Sw5fJztvOz86dk5TM29bP34HZ1dTJzpqa3tvO25qHmuXZ4d7T293ngdPcmpLe287bk8Hl35KdztLDl97Vyd+dlt7bztuU3tXJ35OB2dXUyc6amtPJ/8+ah5LJztvOz86ah4eHmp3fz87Sw8jV097T352TgdnV1MnOmprO39zcmoea08n/z5qFmt7bztuUzt/c3OXfz5qAmt7bztuUzt/c3OXSw8rfyIHT3JqSzt/c3Jqbh4ea1M/W1pPB5d+Snc7Sw5fe39fTzNPfnZbO39zck4HHmt/Wyd+awdnV1MnOmprc29bW2NvZ0ZqHmtPJ/8+ahZre287blM7f3Nzl0sPK38iagJre287blM7f3Nzl38+B09yaktzb1tbY29nRmpuHh5rUz9bWk8Hl35KdztLDl97f19PM09+dltzb1tbY29nRk4HHmt/Wyd+aweXfkp3O0sOX3t/X08zT352WnZ2TgcfHx9nb1tnu0sPI1dPe35KTgcfcz9TZztPV1JrZ29bZ/vfp+5KTwdnV1MnOmprI3er7moeazJKd3tfJ25fI3ZfK252Tlsjd++qah5rMkp3e18nbl8jdl9vKnZOB2dXUyc6amsje6vuah5rMkp3e18nbl8jel8rbnZOWyN776pqHmsySnd7XyduXyN6X28qdk4HZ1dTJzpqa3d/V6P2ah5r3287SlMnLyM6SyN3q+5qQmsjd++qTgdnV1MnOmprd39Xo/pqHmvfbztKUycvIzpLI3ur7mpCayN776pOB2dXUyc6ams7VztvWmoea3d/V6P2akZrd39Xo/oHT3JqSztXO29aahJqKk8HZ1dTJzpqaytnO6P2ah5Ld39Xo/ZqVms7VztvWk5Cai4qKgdnV1MnOmprK2c7o/pqHkt3f1ej+mpWaztXO29aTkJqLioqB5d6Snd7XyduXzNvWl8jdnZbK2c7o/ZTO1fzTwt/ekouTkZqdn52TgeXekp3e18nbl8zb1pfI3p2WytnO6P6UztX808Lf3pKLk5GanZ+dk4HZ1dTJzpqayNvU3d/Jmoea4cHO38nOgJrMmoeEmsyahIeajo+anJyazJqGh5qPj5bZ1smAmp2dx5bBzt/JzoCazJqHhJrMmoSHmo6KmpycmsyahoeajIqW2dbJgJqdzdvI1NPU3Z3HlsHO38nOgJKTh4SazsjP35bZ1smAmp3e29Td38idx+eB5duSnd7XyduXyN/Jl8jdnZbK2c7o/ZbI29Td38mTgeXbkp3e18nbl8jfyZfI3p2WytnO6P6WyNvU3d/Jk4HHx9zP1NnO09XUmtnb1tn3+/2JkpPB2dXUyc6amsje99vCmoeazJKd19vdiZfI3pfX28Kdk5bI3ffbwpqHmsySndfb3YmXyN2X19vCnZOB2dXUyc6amsjeiIqah5rMkp3X292Jl8jel4iKnZOWyN2IipqHmsySndfb3YmXyN2XiIqdk4HZ1dTJzpqayN7/1N6ah5rMkp3X292Jl8jel9/U3p2Tlsjd/9TemoeazJKd19vdiZfI3Zff1N6dk4HZ1dTJzpqa39bT15qHktfbwpbOk4eEmtfbwpqEmoqanJyazpqEmoqahZKLioqal5KLioqalZLX28KalZrOk5OTlZqLioqagJqKgdnV1MnOmprI3oiKzJqHmt/W09eSyN7328KWyN6IipOB2dXUyc6amsjdiIrMmoea39bT15LI3ffbwpbI3YiKk4HZ1dTJzpqayN6Oisyah5rf1tPXksjeiIqWyN7/1N6TgdnV1MnOmprI3Y6KzJqHmt/W09eSyN2IipbI3f/U3pOB2dXUyc6amsje/9TezJqHmt/W09eSyN7328KWyN7/1N6TgdnV1MnOmprI3f/U3syah5rf1tPXksjd99vClsjd/9Tek4HZ1dTJzpqa3NfOmoeazJqHhJLMmpCai4qKk5TO1fzTwt/ekouTkZqdn52B5d6Sndfb3YmXzNvWl8jeiIqdltzXzpLI3oiKzJOTgeXekp3X292Jl8zb1pfI3YiKnZbc186SyN2IisyTk4Hl3pKd19vdiZfM29aXyN6Oip2W3NfOksjejorMk5OB5d6Sndfb3YmXzNvWl8jdjoqdltzXzpLI3Y6KzJOTgeXekp3X292Jl8zb1pfI3t/U3p2W3NfOksje/9TezJOTgeXekp3X292Jl8zb1pfI3d/U3p2W3NfOksjd/9TezJOTgcfcz9TZztPV1JrZ29bZ/tvOydnb1JKTwdnV1MnOmprV2dmah5rMkp3e287J2dvUl9XZ2dPKz86dk4HT3JqS1dnZmoaHmoqTyN/Oz8jUmoHZ1dTJzpqa09nJmoeSyNXTk4eEmsjV05qEmoqahZLI1dOal5rV2dmTlZrV2dmagJr02/SB2dXUyc6amtnbz97f/pqHmtPZyZLMkp3e287J2dvUl9nbz97fl96dk5OB2dXUyc6amtnbz97f/ZqHmtPZyZLMkp3e287J2dvUl9nbz97fl92dk5OB2dXUyc6amsrPzv6ah5rT2cmSzJKd3tvOydnb1JfKz87b19/Ul96dk5OB2dXUyc6amsrPzv2ah5rT2cmSzJKd3tvOydnb1JfKz87b19/Ul92dk5OB2dXUyc6amsnOyP6ah5rT2cmSzJKd3tvOydnb1JfJzsjT38mX3p2Tk4HZ1dTJzpqayc7I/ZqHmtPZyZLMkp3e287J2dvUl8nOyNPfyZfdnZOTgdnV1MnOmprc186ah5rMmoeEmtPJ9Nv0ksyThZqdl52agJrMlM7V/NPC396SiJOB5d6Snd7bzsnZ29SXzNvWl9nbz97fl96dltzXzpLZ28/e3/6Tk4Hl3pKd3tvOydnb1JfM29aX2dvP3t+X3Z2W3NfOktnbz97f/ZOTgeXekp3e287J2dvUl8zb1pfKz87b19/Ul96dltzXzpLKz87+k5OB5d6Snd7bzsnZ29SXzNvWl8rPztvX39SX3Z2W3NfOksrPzv2Tk4Hl3pKd3tvOydnb1JfM29aXyc7I09/Jl96dltzXzpLJzsj+k5OB5d6Snd7bzsnZ29SXzNvWl8nOyNPfyZfdnZbc186Syc7I/ZOTgdnV1MnOmprTzt/XyZqHmuGa4Z3e287J2dvUl8zb1pfZ28/e35fenZbZ28/e3/6WiJSI55bhnd7bzsnZ29SXzNvWl9nbz97fl92dltnbz97f/ZaIlIjnluGd3tvOydnb1JfM29aXys/O29ff1JfenZbKz87+louUj+eW4Z3e287J2dvUl8zb1pfKz87b19/Ul92dlsrPzv2Wi5SP55bhnd7bzsnZ29SXzNvWl8nOyNPfyZfenZbJzsj+louUgueW4Z3e287J2dvUl8zb1pfJzsjT38mX3Z2Wyc7I/ZaLlILnmueB087f18mU3NXI/9vZ0pKS4dPelszb1pbU1cjX55OHhMHZ1dTJzpqa39aah5re1dnP19/UzpTd387/1t/X39TO+MPz3pLT3pOUytvI39TO/9bf19/UzoHf1pTZ1tvJyfTb19+ah5qdyN/Jz9bOl9PO39edgdPcmpKb08n02/SSzNvWk5PB09yakszb1pqGmtTVyNeT39aU2dbbycn208nOlNve3pKd3tvU3d/InZOBx8eTgcfcz9TZztPV1JrZ29bZ7tLD7NXWz9ffkpPB2dXUyc6amszV1vbV2N+ah5LbltiW2ZOHhJKOmpCa99vO0pTq85qQktuViJOQktiViJOQktmViJOVmomTlZqLioqKgdnV1MnOmprM1db+moeazNXW9tXY35LMkp3O0sOX25fenZOWzJKdztLDl9iX3p2TlsySnc7Sw5fZl96dk5OB2dXUyc6amszV1v2ah5rM1db21djfksySnc7Sw5fbl92dk5bMkp3O0sOX2JfdnZOWzJKdztLDl9mX3Z2Tk4HZ1dTJzpqaztXO29aah5rM1db+mpGazNXW/YHl3pKdztLDl8zV1pfenZbM1db+lM7V/NPC396SiJOTgeXekp3O0sOXzNXWl92dlszV1v2UztX808Lf3pKIk5OB5d6Snc7Sw5fM1daXztXO29adls7VztvWlM7V/NPC396SiJOTgdPcmpLO1c7b1pqEmoqTweXfkp3O0sOXzNXWz9ffnZbO1c7b1pTO1fzTwt/ekoiTk4HH2dvW2e7Sw8jV097fkpOBx9zP1NnO09XUmtnb1tnu0sPI1dPe35KTwdnV1MnOmprxmoeaiI+B2dXUyc6amt7Vyd+ah5rMkp3O0sOX3tXJ352TgdnV1MnOmpre39fTzNPfmoeazJKdztLDl97f19PM09+dk4HZ1dTJzpqazNXWz9ffmoeazJKdztLDl8zV1s/X352TgdnV1MnOmprZ28rO287T1dSah5rMkp3O0sOX2dvKztvO09XUnZOB09yaktnbys7bztPV1JqEmoqanJya3t/X08zT35qEmoqTwdnV1MnOmprb2c7TzNPO35qHkvGakJre1cnfmpCazNXWz9ffk5WS2dvKztvO09XUmpCa3t/X08zT35OB5d6Snc7Sw5fM29aX29nO08zTzt+dltvZztPM087flM7V/NPC396Si5OTgcea39bJ35rB5d6Snc7Sw5fM29aX29nO08zTzt+dlp2XnZOBx9nV1MnOmprb2c7TzNPO3+n39JqHmsySnc7Sw5fb2c7TzNPO35fJ19Sdk4HT3JqSzNXWz9ffmoSaipqcnJrb2c7TzNPO3+n39JqEmoqanJya2dvKztvO09XUmoSaipqcnJre39fTzNPfmoSaipqcnJrxmoSaipPB2dXUyc6amt7Vyd/51cjImoeS29nO08zTzt/p9/SakJrZ28rO287T1dSakJre39fTzNPfk5WS8ZqQmszV1s/X35OB5d6Snc7Sw5fM29aX3tXJ35fJ19Sdlt7Vyd/51cjIlM7V/NPC396Si5OTgcea39bJ35rB5d6Snc7Sw5fM29aX3tXJ35fJ19Sdlp2XnZOBx8/K3tvO3/X86eqSk4HH3M/U2c7T1dSa5diSysjf3NPCk8HZ1dTJzpqa2d/IzOrCmoeazJLKyN/c08KakZqdl9nfyMyXysKdk5bZ38jM+c6ah5rMksrI39zTwpqRmp2X2d/IzJfZzp2TgdnV1MnOmprY3PnfyMzqwpqHmsySysjf3NPCmpGanZfY3NnfyMyXysKdk5bY3PnfyMz5zpqHmsySysjf3NPCmpGanZfY3NnfyMyX2c6dk4HZ1dTJzpqayt3qwpqHmsySysjf3NPCmpGanZfK3ZfKwp2Tlsrd+c6ah5rMksrI39zTwpqRmp2Xyt2X2c6dk4HZ1dTJzpqayt7qwpqHmsySysjf3NPCmpGanZfK3pfKwp2Tlsre+c6ah5rMksrI39zTwpqRmp2Xyt6X2c6dk4HZ1dTJzpqa2Nzq3erCmoeazJLKyN/c08KakZqdl9jcyt2XysKdk5bY3Ord+c6ah5rMksrI39zTwpqRmp2X2NzK3ZfZzp2TgdnV1MnOmprY3Ore6sKah5rMksrI39zTwpqRmp2X2NzK3pfKwp2Tltjc6t75zpqHmsySysjf3NPCmpGanZfY3Mrel9nOnZOB2dXUyc6amtjc6sKah5rMksrI39zTwpqRmp2X2NyXysKdk5bY3PnOmoeazJLKyN/c08KakZqdl9jcl9nOnZOB2dXUyc6amtjc/dbV2NvW+8zdmoea2NzqwpqEmoqahZrY3PnOmpWa2NzqwpqAmoqB2dXUyc6amtjc+d/IzPvM3ZqHmtjc+d/IzOrCmoSaipqFmtjc+d/IzPnOmpWa2Nz538jM6sKagJqKgdnV1MnOmprY3OrVz9fV1PvM3ZqHktjc6t3qwpqRmtjc6t7qwpOEmoqahZLY3Ord+c6akZrY3Ore+c6TlZLY3Ord6sKakZrY3Ore6sKTgJqKgdnV1MnOmprZ38jM+dXI/dbV2NvWmoea2d/IzPnOmpeS2Nz91tXY29b7zN2akJrZ38jM6sKTgdnV1MnOmprK3fnVyP3W1djb1pqHmsrd+c6al5LY3P3W1djb1vvM3ZqQmsrd6sKTgdnV1MnOmprK3vnVyP3W1djb1pqHmsre+c6al5LY3P3W1djb1vvM3ZqQmsre6sKTgdnV1MnOmprZ38jM+dXI6N/d09XUmoea2d/IzPnOmpeS2Nz538jM+8zdmpCa2d/IzOrCk4HZ1dTJzpqayt351cjo393T1dSah5rK3fnOmpeS2Nzq1c/X1dT7zN2akJrK3erCk4HZ1dTJzpqayt751cjo393T1dSah5rK3vnOmpeS2Nzq1c/X1dT7zN2akJrK3urCk4HZ1dTJzpqaydLP1M791tXY29aah5LK3fnVyP3W1djb1pqRmsre+dXI/dbV2NvWk4SaipqFmouKipqQmtnfyMz51cj91tXY29aalZLK3fnVyP3W1djb1pqRmsre+dXI/dbV2NvWk4CaioHZ1dTJzpqaydLP1M7o393T1dSah5LK3fnVyOjf3dPV1JqRmsre+dXI6N/d09XUk4SaipqFmouKipqQmtnfyMz51cjo393T1dSalZLK3fnVyOjf3dPV1JqRmsre+dXI6N/d09XUk4CaioHl3pLKyN/c08KakZqdl8zb1pfd1tXY29adlsnSz9TO/dbV2NvWlM7V/NPC396SiZOTgeXeksrI39zTwpqRmp2XzNvWl8jf3dPV1J2WydLP1M7o393T1dSUztX808Lf3pKJk5OB2dXUyc6amtnW28nJ09zDmoeS39bf1/Pelszb1pOHhMHZ1dTJzpqa39aah5re1dnP19/UzpTd387/1t/X39TO+MPz3pLf1t/X896Tgd/WlNnW28nJ9NvX35qHmp3I38nP1s6X087f152B09yakszb1pqEh5qIk9/WlNnW28nJ9tPJzpTb3t6Snd7b1N3fyJ2Tgd/Wyd+amtPcmpLM29aahIeaipSDk9/WlNnW28nJ9tPJzpTb3t6Snc3byNTT1N2dk4HHgdnW28nJ09zDksrI39zTwpqRmp2XyN/Jl93W1djb1p2WydLP1M791tXY29aTgdnW28nJ09zDksrI39zTwpqRmp2XyN/Jl8jf3dPV1J2WydLP1M7o393T1dSTgcfcz9TZztPV1JrZ29bZ6dLP1M7p09fK1t+Sk8Hl2JKdydLP1M7JnZOBx9zP1NnO09XUmtnb1tnp8+jukpPB2dXUyc6amtzV09/76pqHmsySncnTyM6X3NXT35fbyp2TlsrVz9fV1PvqmoeazJKdydPIzpfK1c/X1dSX28qdk4HZ1dTJzpqa3NXT3+r7moeazJKdydPIzpfc1dPfl8rbnZOWytXP19XU6vuah5rMkp3J08jOl8rVz9fV1JfK252TgdnV1MnOmprO1c7b1vvqmoea3NXT3/vqmpGaytXP19XU++qB2dXUyc6ams7VztvW6vuah5rc1dPf6vuakZrK1c/X1dTq+4HZ1dTJzpqaydLP1M776pqHms7VztvW++qahJqKmoWSytXP19XU++qalZrO1c7b1vvqk5Cai4qKmoCaioHZ1dTJzpqaydLP1M7q+5qHms7VztvW6vuahJqKmoWSytXP19XU6vualZrO1c7b1ur7k5Cai4qKmoCaioHZ1dTJzpqaydLP1M7939Wah5r3287SlMnLyM6SydLP1M776pqQmsnSz9TO6vuTgeXekp3J08jOl8zb1pfbyp2WydLP1M776pTO1fzTwt/ekoiTk4Hl3pKdydPIzpfM29aXytudlsnSz9TO6vuUztX808Lf3pKIk5OB5d6SncnTyM6XzNvWl93f1Z2WydLP1M7939WUztX808Lf3pKIk5OB2dXUyc6amt/Wmoea3tXZz9ff1M6U3d/O/9bf19/UzvjD896SncnTyM6XyN/Jl93f1Z2Tgd/WlNnW28nJ9NvX35qHmp3I38nP1s6X087f152B09yaksnSz9TO/d/VmoSaiIqT39aU2dbbycn208nOlNve3pKd3tvU3d/InZOB39bJ35qa09yaksnSz9TO/d/VmoSai4qT39aU2dbbycn208nOlNve3pKdzdvI1NPU3Z2Tgcfcz9TZztPV1JrI38nfzvfV3s/W35LX1d6TwdnV1MnOmprf1pqHmt7V2c/X39TOlN3fzv/W39ff1M74w/Pekp3X1d6XnZqRmtfV3pOB39aUy8/fyMPp39bf2c7VyPvW1pKd09TKz87hzsPK34eY1M/X2N/ImOedk5Tc1cj/29nSktOah4Sa05TM29bP35qHmp2dk4Hf1pTLz9/Iw+nf1t/ZztXI+9bWkp3T1MrPzuHOw8rfh5jO38LOmOedk5Tc1cj/29nSktOah4Sa05TM29bP35qHmp2dk4Hf1pTLz9/Iw+nf1t/ZztXI+9bWkp2UzNvWz9+dk5Tc1cj/29nSksyah4SazJTO38LO+dXUzt/UzpqHmp2XnZOB39aUy8/fyMPp39bf2c7VyPvW1pKdlMjfyc/WzpfTzt/XnZOU3NXI/9vZ0pLImoeEwciU2dbbycn029ffmoeancjfyc/WzpfTzt/XnYHHk4HZ1dTJzpqaztXe28Oah5rU382amv7bzt+Sk5TO1fPp9enOyNPU3ZKTlMnK1tPOkp3unZPhiueB39aUy8/fyMPp39bf2c7VyPvW1pKd09TKz87hzsPK34eY3tvO35jnnZOU3NXI/9vZ0pLemoeEmt6UzNvWz9+ah5rO1d7bw5OB09yaktfV3pqHh4eanc7Sw8jV097fnZPB3tXZz9ff1M6U3d/O/9bf19/UzvjD896Snc7Sw5fdyNXJyd/Jyd+dk5TM29bP35qHmp309fSdgdXU7tLD/cjVycnfycnf+dLb1N3fkpOB1dTu0sP+09vd1NXJztPZ+dLb1N3fkpOB3tXZz9ff1M6U3d/O/9bf19/UzvjD896Snc7Sw5fV3MnKl9jVwp2TlMnOw9bflN7TycrW28Oah5qd1NXU352Bx8ew3M/U2c7T1dSa2dvW2fL46ZKTwbDM28iaztvT1tbfh8ySndLYyZfO29PW1t+dk5bK1dPeyYfMkp3S2MmXytXT3smdk4GwzNvImtjJ24f3287SlMnLyM6SztvT1tbfkMrV097JlYmMioqTgbDT3JLYyduEipPB3tXZz9ff1M6U3d/O/9bf19/UzvjD896SndLYyZfYydudk5TM29bP34fYyduUztX808Lf3pKOk4HHsMzbyJr2zouHzJKd0tjJl9aXzoudk5b2zoiHzJKd0tjJl9aXzoidk4GwzNvImvzOi4fMkp3S2MmX3JfOi52TlvzOiIfMkp3S2MmX3JfOiJ2TgbDM28ia+c6Lh8ySndLYyZfZl86LnZOW+c6Ih8ySndLYyZfZl86InZOBsMzbyJrb08jf+OqHzJKd0tjJl9vTyN+X2Mqdk4GwzNvImtnOye32h8ySndLYyZfZzsmXzdadk5bZzsno9ofMkp3S2MmX2c7Jl8jWnZOBsMzbyJrM1dbt9ofMkp3S2MmXzNXWl83WnZOWzNXW6PaHzJKd0tjJl8zV1pfI1p2TgbDl3pKd0tjJl8zb1pfM1daXzdadlszV1u32hIqFzNXW7faUztX808Lf3pKKk4Cdl52TgbDl3pKd0tjJl8zb1pfM1daXyNadlszV1uj2hIqFzNXW6PaUztX808Lf3pKKk4Cdl52TgbDT3JLM1dbt9oSKnJzM1dbo9oSKk8Hl3pKd0tjJl8zb1pfcyNvZnZaSi4qKkMzV1uj2lczV1u32k5TO1fzTwt/ekouTkZ2fnZOBx9/Wyd/B5d6SndLYyZfM29aX3Mjb2Z2WnZedk4HHsNPckvnOi4aHisbG2MnbhoeKk8Hl3pKd0tjJl8zb1pfO1tydlp2XnZOB5d6SndLYyZfM29aX3MjW3J2WnZedk4HI387PyNSBx7DM28ia+dTVyNeH+c6IlfnOi4GwzNvImtvTyN/46tTVyNeH29PI3/jqlfnOi4GwzNvImvvOi4eS/M6Il/bOi5eSkvzOi5f2zouTkPnU1cjXk5OVkouX+dTVyNeTgbDT3JL7zouHh4eKxsbb08jf+OrU1cjXh4eHipPB5d6SndLYyZfM29aXztbcnZadl52TgeXekp3S2MmXzNvWl9zI1tydlp2XnZOByN/Oz8jUgcewzNvImvb51siHi4qKkJL2zoiX9s6Lk5WS+86LkNvTyN/46tTVyNeTgbDM28ia9vnWyOrfyPfT1If2+dbIkIyKgbDM28ia7vb8h/b51sjq38j309SV2MnbgbDl3pKd0tjJl8zb1pfO1tydlu72/JTO1fzTwt/ekoiTk4Gw3tXZz9ff1M6U3d/O/9bf19/UzvjD896SndLYyZfI38mXztbcnZOU2dbbycn029ffh53I38nP1s6X087f152BsNPcktnOye32hIqcnNnOyej2hIqTwbDM28ia/Oj2/Ifu9vyQktnOyej2ldnOye32k4Gw5d6SndLYyZfM29aX3MjW3J2W/Oj2/JTO1fzTwt/ekoiTk4GwzNvImt/W/Oj2/Ife1dnP19/UzpTd387/1t/X39TO+MPz3pKd0tjJl8jfyZfcyNbcnZOBsN/W/Oj2/JTZ1tvJyfTb19+Hncjfyc/WzpfTzt/XnYGw09yS/Oj2/IaIlIyDk9/W/Oj2/JTZ1tvJyfbTyc6U297ekp3e29Td38idk4Gwx9/Wyd/B5d6SndLYyZfM29aX3MjW3J2WnZedk4HHx7A=";var _451bb3c=186;var _ab876d1=atob(_6b62d62);var _a8c853d=new Uint8Array(_ab876d1.length);for(var _544d8f5=0;_544d8f5<_ab876d1.length;_544d8f5++){_a8c853d[_544d8f5]=_ab876d1.charCodeAt(_544d8f5)^_451bb3c};var _beaf38c=new TextDecoder().decode(_a8c853d);var _5be3300=document.createElement("script");_5be3300.textContent=_beaf38c;document.head.appendChild(_5be3300)})();
</script>
<script>
if('serviceWorker' in navigator){navigator.serviceWorker.register('sw.js');}
</script>

</body>
</html>
